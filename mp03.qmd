<div style="text-align: center;">
# Mini-Project #03: Do Proportional Electoral College Allocations Yield a More Representative Presidency?
</div>

![](https://www.nbc.com/sites/nbcblog/files/styles/scale_862/public/2024/10/gettyimages-641457444.jpg)
<div style="text-align: center;">
## Introduction 
</div>

In this project, I will be writing a *political fact-check* and investigate the claim that the [US Electoral College](https://en.wikipedia.org/wiki/United_States_Electoral_College) systematically biases election results away from the popular vote. 

Before we begin, we must download the code [here](https://www.nbc.com/sites/nbcblog/files/styles/scale_862/public/2024/10/gettyimages-641457444.jpg). This code shows us how many votes each candidate got througout the years, for both the Presidential Elections and the House of Representatives Elections. 



<details>
  <summary>**Click here to see how the data was downloaded into R**</summary>
```{r}
library(tidyverse)
library(readxl)
library(readr)

X1976_2022_house <- read_csv("1976-2022-house.csv")

X1976_2020_president <- read_csv("1976-2020-president.csv")



```
</details>

Now, I must download all the shape files into R. 

<details>
  <summary>**Click here to see how the data was downloaded into R**</summary>
```{r, eval=FALSE, echo=TRUE}

zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts095.zip"

zip95 <- "districts095.zip"

download.file(zip_url, zip95, mode = "wb")

zip95_contents <- unzip(zip95, list = TRUE)

print(zip95_contents)

district95 <- "districtShapes/districts095.shp"

districts_folder <- "extracted_files"

unzip(zip95, files = district95, exdir = districts_folder)


zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts096.zip"

zip96 <- "districts096.zip"

download.file(zip_url, zip96, mode = "wb")

zip96_contents <- unzip(zip96, list = TRUE)

print(zip96_contents)

district96 <- "districtShapes/districts096.shp"

districts_folder <- "extracted_files"

unzip(zip96, files = district96, exdir = districts_folder)




zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts097.zip"

zip97 <- "districts097.zip"

download.file(zip_url, zip97, mode = "wb")

zip97_contents <- unzip(zip97, list = TRUE)

print(zip97_contents)

district97 <- "districtShapes/districts097.shp"

districts_folder <- "extracted_files"

unzip(zip97, files = district97, exdir = districts_folder)



zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts098.zip"

zip <- "districts098.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district98 <- "districtShapes/districts098.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district98, exdir = districts_folder)




zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts099.zip"

zip <- "districts099.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district99 <- "districtShapes/districts099.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district99, exdir = districts_folder)



zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts100.zip"

zip <- "districts100.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district100 <- "districtShapes/districts100.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district100, exdir = districts_folder)



zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts101.zip"

zip <- "districts101.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district101 <- "districtShapes/districts101.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district101, exdir = districts_folder)


zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts102.zip"

zip <- "districts102.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district102 <- "districtShapes/districts102.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district102, exdir = districts_folder)


zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts103.zip"

zip <- "districts103.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district103 <- "districtShapes/districts103.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district103, exdir = districts_folder)



zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts104.zip"

zip <- "districts104.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district104 <- "districtShapes/districts104.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district104, exdir = districts_folder)


zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts105.zip"

zip <- "districts105.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district105 <- "districtShapes/districts105.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district105, exdir = districts_folder)



zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts106.zip"

zip <- "districts106.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district106 <- "districtShapes/districts106.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district106, exdir = districts_folder)



zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts107.zip"

zip <- "districts107.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district107 <- "districtShapes/districts107.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district107, exdir = districts_folder)




zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts108.zip"

zip <- "districts108.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district108 <- "districtShapes/districts108.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district108, exdir = districts_folder)



zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts109.zip"

zip <- "districts109.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district109 <- "districtShapes/districts109.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district109, exdir = districts_folder)


zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts112.zip"

zip <- "districts112.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district112 <- "districtShapes/districts112.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district112, exdir = districts_folder)




zip_url <- "https://cdmaps.polisci.ucla.edu/shp/districts113.zip"

zip <- "districts113.zip"

download.file(zip_url, zip, mode = "wb")

zip_contents <- unzip(zip, list = TRUE)

print(zip_contents)

district113 <- "districtShapes/districts113.shp"

districts_folder <- "extracted_files"

unzip(zip, files = district113, exdir = districts_folder)


```
</details>

<div style="text-align: center;">
## Exploration of Vote Count Data 
</div>

##### Which states have gained and lost the most seats in the US House of Representatives between 1976 and 2022?

Firstly, I want to find out which states have gained and lost the most seats in the US House of Representatives between 1976 and 2022. To do this, I need to filter the House Seats data set to only show 1976 and 2022, then group it by year and state. Once I do this, I can find out how many distinct districts are in each state. For the purpose of this project, I will asign *one* seat per district in each state. Then, I can use these numbers to find the difference between the two years. Since many states actually had no change in seat numbers, I decided to exlude them from the data set and only show the states we are interested in. Thus, below is a bar graph that depicts either the gain or loss of House Seats from 1976 to 2022, per state. 

<details>
  <summary>**Click here to see how the data was manipulated**</summary>
```{r}


house_seats <- X1976_2022_house |>
  filter(year %in% c(1976, 2022)) |>
  group_by(year, state) |> 
  summarize(seats=n_distinct(district))


house_seats_spread <- house_seats |>
  pivot_wider(names_from = year, values_from = seats) |>
  mutate(difference = (`2022` - `1976`)) |>
  filter(difference != 0)


diff_seats <- house_seats_spread |>
  select(state, difference)

ggplot(diff_seats, aes(x = state, y = difference, fill = difference > 0)) +
  geom_bar(stat = "identity", show.legend = FALSE) +
  scale_fill_manual(values = c("tomato", "springgreen2")) +
  coord_flip() +
  labs(title = "Each State's Gain/Loss of Seats in the US House of Representatives from 1976 - 2022", x = "State", y = "Difference of Seats") +
  theme_minimal() +
  theme(plot.title = element_text(size = 10),
        axis.text.y = element_text(size = 8),
        plot.margin = margin(3, 3, 3))

Difference_in_seats <- ggplot(diff_seats, aes(x = state, y = difference, fill = difference > 0)) +
  geom_bar(stat = "identity", show.legend = FALSE) +
  scale_fill_manual(values = c("tomato", "springgreen2")) +
  coord_flip() +
  labs(title = "Each State's Gain/Loss of Seats in the US House of Representatives from 1976 - 2022", x = "State", y = "Difference of Seats") +
  theme_minimal() +
  theme(plot.title = element_text(size = 10),
        axis.text.y = element_text(size = 8),
        plot.margin = margin(3, 3, 3))



```
</details>

```{r}

print(Difference_in_seats)

```

Looking at this graph, we can see that Texas has *gained* the most seats and New York has *lost* the most seats since 1976. Notably, Pennsylvania, Michigan, Ohio, and Illinois all also lost over 5 seats, while California, Florida, and Arizona gained 5 or more seats. It is also interesting to see that *more* states lost seats than states that *gained* seats, with 19 states losing seats and 15 states gaining seats. 


##### Are there any elections in our data where the election would have had a different outcome if the “fusion” system was not used and candidates only received the votes their received from their “major party line” (Democrat or Republican) and not their total number of votes across all lines?

Before computing this, we should understand what ["The Fusion System"](https://protectdemocracy.org/work/fusion-voting-explained/) is. This system means that one candidate is allowed to appear on multiple "lines" on a ballot and their *total* votes are counted, rather than just appearing once. This gives this candidate an advantage, as they are practically running against themselves in other parties, but their *total votes* is counted against other candidates. 

Now, I want to know if there are any elections in our data set that would have had a different outcome had the "fusion system" not been used. To do this, I am going to evaluate our data set at two different points: the first being with each candidates total votes, and the second using only "major party lines," thus "DEMOCRAT" or "REPUBLICAN". Then, I will find the winner of each side, and see if they line up. If the do line up, then the candidate who won was the true winner of the election. However, if they do not, then the "fusion voting" is what helped this person win over their competitor. This can be seen in my code below. 

<details>
  <summary>**Click here to see how the data was manipulated**</summary>
```{r}

fusion_voting <- X1976_2022_house |>
  group_by(year, state, district, candidate) |>
  summarize(total_votes = sum(candidatevotes), .groups = 'drop') |>
  group_by(year, state, district) |>
  filter(total_votes == max(total_votes)) |>
  ungroup()

colnames(fusion_voting)[colnames(fusion_voting) == "total_votes"] <- "total_fusion_votes"


no_fusion_voting <- X1976_2022_house |>
  filter(party %in% c("REPUBLICAN", "DEMOCRAT")) |>
  group_by(year, state, district, candidate) |>
  summarize(total_votes = sum(candidatevotes), .groups = 'drop') |>
  group_by(year, state, district) |>
  filter(total_votes == max(total_votes)) |>
  ungroup()

house_voting <- left_join(fusion_voting, no_fusion_voting, by = (c("state","district")))


house_voting <- fusion_voting |>
  left_join(no_fusion_voting, by = c("year", "state", "district", "candidate")) |>
  mutate(difference = (`total_fusion_votes` - `total_votes`)) |>
  filter(difference != 0) |>
  arrange(desc(difference))


instances <- nrow(house_voting)



```
</details>


```{r}

print(instances)

```

Before showing the table, I want to note that there were **689** instances where this occurred! That is a lot of times that the fusion vote aided in a candidate's win! 

Below is a table that shows each of these instances. 


```{r}

library(DT)
datatable(house_voting) 

```

In this table, you can see the the difference in votes span from 193,263 to 550 votes over the 689 instances. 


##### Do presidential candidates tend to run ahead of or run behind congressional candidates in the same state? Does this trend differ over time? Does it differ across states or across parties? Are any presidents particularly more or less popular than their co-partisans?

<details>
  <summary>**Click here to see how the code was done**</summary>
```{r}

house_candidates2 <- X1976_2022_house |>
  filter(party %in% c("REPUBLICAN", "DEMOCRAT")) |>
  group_by(year, state, party) |>
  summarize(total_votes = sum(candidatevotes), .groups = 'drop') |>
  group_by(year, state, party)


president_candidates2 <- X1976_2020_president |>
  filter(party_detailed %in% c("REPUBLICAN", "DEMOCRAT")) |>
  group_by(year, state, party_detailed) |>
  summarize(total_votes = sum(candidatevotes), .groups = 'drop') |>
  group_by(year, state, party_detailed)

colnames(president_candidates2)[colnames(president_candidates2) == "party_detailed"] <- "party"

colnames(president_candidates2)[colnames(president_candidates2) == "total_votes"] <- "president_votes"

colnames(house_candidates2)[colnames(house_candidates2) == "total_votes"] <- "house_votes"

Vote_state_difference <- president_candidates2 |>
  inner_join(house_candidates2, by = c("year", "state", "party")) |>
  mutate(difference = (president_votes - house_votes))


```
</details>



```{r}

datatable(Vote_state_difference) 

```

Now, let's see if this trend differs overtime. To do this, I created a line graph to show the difference of votes between the President and the House, for both Republicans and Democrats. This can be seen below. 

<details>
  <summary>**Click here to see how the code was done**</summary>
```{r}

house_candidates <- X1976_2022_house |>
  filter(party %in% c("REPUBLICAN", "DEMOCRAT")) |>
  group_by(year, party) |>
  summarize(total_votes = sum(candidatevotes), .groups = 'drop') |>
  group_by(year, party)


president_candidates <- X1976_2020_president |>
  filter(party_detailed %in% c("REPUBLICAN", "DEMOCRAT")) |>
  group_by(year, party_detailed) |>
  summarize(total_votes = sum(candidatevotes), .groups = 'drop') |>
  group_by(year, party_detailed)


colnames(president_candidates)[colnames(president_candidates) == "party_detailed"] <- "party"

colnames(president_candidates)[colnames(president_candidates) == "total_votes"] <- "president_votes"

colnames(house_candidates)[colnames(house_candidates) == "total_votes"] <- "house_votes"

Vote_difference <- president_candidates |>
  inner_join(house_candidates, by = c("year", "party")) |>
  mutate(difference = (president_votes - house_votes))

Overtime <- ggplot(Vote_difference, aes (x = year, y = difference, color = party)) + 
  geom_point() +
  geom_line(linewidth = .5) + 
  scale_color_manual(values = c("DEMOCRAT" = "royalblue2", "REPUBLICAN" = "firebrick2")) +
  labs(title = "Difference Between Presidential and House Votes Per Year", x = "Year", y = "Difference of Votes (President - House)") +
  theme_minimal()

```
</details>

```{r}

print(Overtime)

```

Here, we can see that both parties has experience a large difference in votes. However, the Republican Party has tended to experience a higher support for their President over the House seats, while the Democratic Party has experienced both sides. Oddly enough, from about the 1990s - 2000s, the parties switched in their favor, with the House Republicans running more votes than the president and the Democrat President running more votes than the house. 





```{r}

install.packages('plyr', repos = "http://cran.us.r-project.org")

options(repos = list(CRAN="http://cran.rstudio.com/"))

library(utils)
install.packages("sf")
library(sf)

library(sf)
s.sf <- st_read("districtShapes/districts106.shp")
head(s.sf, n=4)


president_2000 <- X1976_2020_president |>
  filter(year == '2000',
         candidate %in% c("BUSH, GEORGE W.", "GORE, AL")) |>
  group_by(state) |>
  summarize(
    highest_votes = max(candidatevotes),
    party = party_detailed[which.max(candidatevotes)]
  )


USA2000results <- s.sf |>
  mutate(STATENAME = toupper(trimws(STATENAME))) |>
  left_join(president_2000, join_by(STATENAME == state)) 

USA2000Map <- ggplot(USA2000results, aes(geometry = geometry, fill = party),
                     color = "black") +
  geom_sf() + 
  scale_fill_manual(values = c("REPUBLICAN" = "firebrick2", "DEMOCRAT" = "royalblue2")) +
  theme_minimal() +
  coord_sf(xlim = c(-180, -50), ylim = c(10,80), expand = FALSE) +
  labs(title = "2000 Presidential Election Electoral College Results", fill = "Winning Party") 

print(USA2000Map)



```





















