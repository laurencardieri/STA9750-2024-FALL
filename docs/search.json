[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "My Website",
    "section": "",
    "text": "My name is Lauren and I am 22 years old.\nI am currently a student in Baruch’s MS Business Analytics Program.\n\nMy Dogs!\nI have two dogs! Their names are:\n\nMacaroni\n\nMacaroni (Mack) is technically my brother’s dog, but we babysit him while he’s at work.\nHe is a Golden Retreiver and is 2 years old!\n\n\nRusty\n\nRusty is extremely loving and the smartest dog I have ever met.\nHe is a Pitbull/Lab mix and is 13 years old (we think, he’s a rescue)!"
  },
  {
    "objectID": "mp01.html",
    "href": "mp01.html",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "This project was taken as inspiration from a YouTuber City Nerd, who created a video about the “10 Transit Services That Do Huge Numbers at the Farebox”. Farebox Recovery is the fraction of revenues raised from fares instead of taxes.\nFor this project, we will use data from the National Transit Database as our primary source. The following tables/reports will be used:\n\nThe 2022 Fare Revenue table, in which we will mostly explore revenue.\nThe lastest Monthly Ridership tables, in which we will mostly explore the Unlinked Passenger Trips (UPT) and Vehicle Revenue Miles (VRM).\nThe 2022 Operating Expenses reports, in which we will mostly explore expenses.\n\nWe will use the 2022 verson of all reports, as up-to-date data and newer reports are often uploaded on a lag.\n\n\n\nFirst, we must download, clean, and join the tables.\nUnfortunately, the code that allowed the immediate download of the data sets did not work for me. So instead, I had to download the data and import it into R, which is seen in my code below.\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(readxl)\nlibrary(readr)\n\nFARES &lt;- read_excel(\"Miniproject001/2022 Fare Revenue (1).xlsx\") |&gt;\n  select(-`State/Parent NTD ID`, \n         -`Reporter Type`,\n         -`Reporting Module`,\n         -`TOS`,\n         -`Passenger Paid Fares`,\n         -`Organization Paid Fares`) |&gt;\n  filter(`Expense Type` == \"Funds Earned During Period\") |&gt;\n  select(-`Expense Type`) |&gt;\n  group_by(`NTD ID`,       # Sum over different `TOS` for the same `Mode`\n           `Agency Name`,  # These are direct operated and sub-contracted \n           `Mode`) |&gt;      # of the same transit modality\n  # Not a big effect in most munis (significant DO\n  # tends to get rid of sub-contractors), but we'll sum\n  # to unify different passenger experiences\n  summarize(`Total Fares` = sum(`Total Fares`)) |&gt;\n  ungroup()\n\n`summarise()` has grouped output by 'NTD ID', 'Agency Name'. You can override\nusing the `.groups` argument.\n\nEXPENSES &lt;- read_csv(\"Miniproject001/2022_NTD_Annual_Data_-_Operating_Expenses__by_Function__20231102.csv\") |&gt;\n  select(`NTD ID`, \n         `Agency`,\n         `Total`, \n         `Mode`) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\n  rename(Expenses = Total) |&gt;\n  group_by(`NTD ID`, `Mode`) |&gt;\n  summarize(Expenses = sum(Expenses)) |&gt;\n  ungroup()\n\nRows: 3744 Columns: 29\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (9): Agency, City, State, Organization Type, Reporter Type, UZA Name, M...\ndbl (13): NTD ID, Report Year, UACE Code, Primary UZA Population, Agency VOM...\nlgl  (7): Vehicle Operations Questionable, Vehicle Maintenance Questionable,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n`summarise()` has grouped output by 'NTD ID'. You can override using the `.groups` argument.\n\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n\nNow, we must extract the monthly transit numbers. My computer struggled to read the whole file for ridership, so I split it into two respective files, one for UPT and one for VRM. This is seen in my code below.\n\nTRIPS &lt;- read_excel(\"Miniproject001/Ridership_UPT.xlsx\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(-`Legacy NTD ID`, \n         -`Reporter Type`, \n         -`Mode/Type of Service Status`, \n         -`UACE CD`, \n         -`TOS`) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`), \n               names_to=\"month\", \n               values_to=\"UPT\") |&gt;\n  drop_na() |&gt;\n  mutate(month=my(month)) # Parse _m_onth _y_ear date specs\n\n\nMILES &lt;- read_excel(\"Miniproject001/Ridership_VRN.xlsx\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(-`Legacy NTD ID`, \n         -`Reporter Type`, \n         -`Mode/Type of Service Status`, \n         -`UACE CD`, \n         -`TOS`) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`), \n               names_to=\"month\", \n               values_to=\"VRM\") |&gt;\n  drop_na() |&gt;\n  group_by(`NTD ID`, `Agency`, `UZA Name`, \n           `Mode`, `3 Mode`, month) |&gt;\n  summarize(VRM = sum(VRM)) |&gt;\n  ungroup() |&gt;\n  mutate(month=my(month)) # Parse _m_onth _y_ear date specs\n\n`summarise()` has grouped output by 'NTD ID', 'Agency', 'UZA Name', 'Mode', '3\nMode'. You can override using the `.groups` argument.\n\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`))\n\nJoining with `by = join_by(`NTD ID`, Agency, `UZA Name`, Mode, `3 Mode`,\nmonth)`\n\n\nNow, this creates the table as follows:\n\nif(!require(\"DT\")) install.packages(\"DT\")\n\nLoading required package: DT\n\nlibrary(DT)\n\nsample_n(USAGE, 1000) |&gt; \n    mutate(month=as.character(month)) |&gt; \n    DT::datatable()\n\n\n\n\n\n\n\n\nHere, I decided to rename three of the columns in my table, one to remove spaces so it is easier to manipulate in code, and the other to have more common names for easier understanding. Thus, I wanted:\n\n“UZA Name” to become “Metro_Area”\n“UPT” to become “Unlinked_Passenger_Trips”\n“VRM” to become “Vehicle Revenue Miles”\n\nSo, I did this with the following code:\n\ncolnames(USAGE)[colnames(USAGE) == \"UZA Name\"] &lt;- \"Metro_Area\"\ncolnames(USAGE)[colnames(USAGE) == \"UPT\"] &lt;- \"Unlinked_Passenger_Trips\"\ncolnames(USAGE)[colnames(USAGE) == \"VRM\"] &lt;- \"Vehicle_Revenue_Miles\"\n\nAnd then I reloaded my table to see if the columns changed/looked good. They did!\n\nlibrary(DT)\n\nsample_n(USAGE, 1) |&gt; \n    mutate(month=as.character(month)) |&gt; \n    DT::datatable()\n\n\n\n\n\n\n\n\nFirst, I needed to know what the unique codes were used in the Mode column in our data set. To do this, I ran the following command, which produced the following 18 codes:\n\ndistinct(USAGE, Mode)\n\n# A tibble: 18 × 1\n   Mode \n   &lt;chr&gt;\n 1 DR   \n 2 FB   \n 3 MB   \n 4 SR   \n 5 TB   \n 6 VP   \n 7 CB   \n 8 RB   \n 9 LR   \n10 YR   \n11 MG   \n12 CR   \n13 AR   \n14 TR   \n15 HR   \n16 IP   \n17 PB   \n18 CC   \n\n\nUsing the Glossary on the National Transit Database website, I forced search each of these codes to find their corresponding name. Then, I recoded my table to display these names.\n\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode=case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\", \n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail and Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramways\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"))\n\nThus, my cleaned-up table became:\n\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\n\nsample_n(USAGE, 1000) |&gt; \n    mutate(month=as.character(month)) |&gt; \n    DT::datatable()\n\n\n\n\n\n\n\n\n\nWhat transit agency had the most total VRM in our data set?\n\n\ntotal_vrm_agency &lt;- USAGE |&gt; \n  group_by(`Agency`) |&gt; \n  summarize(VRM = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt;\n  arrange(desc(VRM))\n  tvrm &lt;- total_vrm_agency |&gt;\n    slice_max(VRM, n = 1)\n  print(tvrm)\n\n# A tibble: 1 × 2\n  Agency                            VRM\n  &lt;chr&gt;                           &lt;dbl&gt;\n1 MTA New York City Transit 10832855350\n\n\nThus, the transit agency that had the most total VRM in our data set was MTA New York City Transit, with a Vehicle Revenue Miles of 10832855350. This makes sense, as public transit easily spans the entirety of New York City, whether it be the subway, buses, the ferry, or more. Since public transit is prevalent in our lives as New Yorkers, with many not even owning their own vehicle and solely relying on public transit, it is understandable that NYC is top of the list.\n\nWhat transit mode had the most total VRM in our data set?\n\n\n  total_vrm_mode &lt;- USAGE |&gt; \n    group_by(`Mode`) |&gt; \n    summarize(M = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt;\n    arrange(desc(M))\n    topmode &lt;- total_vrm_mode |&gt;\n      slice_max(M, n = 1)\n    print(topmode)\n\n# A tibble: 1 × 2\n  Mode            M\n  &lt;chr&gt;       &lt;dbl&gt;\n1 Bus   49444494088\n\n\nThe transit mode that had the most total VRM in our data set was the BUS, with a Vehicle Revenue Miles of 49444494088.\n\nHow many trips were taken on the NYC subway (Heavy Rail) in May 2024?\n\n\n    May24Subway &lt;- USAGE |&gt;\n      filter(Mode == \"Heavy Rail\", month &gt;= \"2024-05-01\", month &lt;= \"2024-05-31\") |&gt;\n      summarize(may_sub = sum(Unlinked_Passenger_Trips, na.rm = TRUE))\n    \n    print(May24Subway)\n\n# A tibble: 1 × 1\n    may_sub\n      &lt;dbl&gt;\n1 237383777\n\n\nSo, in May 2024, 237383777 unlinked passenger trips were taken on the NYC subway (Heavy Rail). Again, I believe that this checks out, especially with the way many New Yorkers rely on the subway to get around Manhatten during the work day.\n\nHow much did NYC subway ridership fall between April 2019 and April 2020?\n\n\n  april_19_to_20 &lt;- USAGE |&gt;\n      filter(Mode == \"Heavy Rail\", \n             (month &gt;= \"2019-04-01\" & month &lt;= \"2019-04-30\") |\n             (month &gt;= \"2020-04-01\" & month &lt;= \"2020-04-30\"))|&gt;\n      group_by(month) |&gt;\n      summarize(aprupt = sum(Unlinked_Passenger_Trips, na.rm = TRUE)) |&gt;\n      summarize(april_difference = \n            sum(aprupt[month &gt;= \"2020-04-01\" & month &lt;= \"2020-04-30\"]) - \n            sum(aprupt[month &gt;= \"2019-04-01\" & month &lt;= \"2019-04-30\"]))\n    \n    print(april_19_to_20)\n\n# A tibble: 1 × 1\n  april_difference\n             &lt;dbl&gt;\n1       -296416858\n\n\nHere, we can see that 296416858 less riders used the NYC Subway in April 2020 than April 2019. This makes a lot of sense, as April 2020 was the true start of lock down we faced because of the Covid-19 Pandemic. Whether riders were terrified to leave their homes in fear of contracting the virus or they were listening to the mandate to stay inside unless it is for an emergency, it is not a shock that the MTA had almost 300 million less riders in comparison.\nTo further prove this point, let’s consider the same comparison, but for May 2019 and May 2020.\n\n  may_19_to_20 &lt;- USAGE |&gt;\n      filter(Mode == \"Heavy Rail\", \n             (month &gt;= \"2019-05-01\" & month &lt;= \"2019-05-31\") |\n             (month &gt;= \"2020-05-01\" & month &lt;= \"2020-05-31\"))|&gt;\n      group_by(month) |&gt;\n      summarize(mayupt = sum(Unlinked_Passenger_Trips, na.rm = TRUE)) |&gt;\n      summarize(may_difference = \n            sum(mayupt[month &gt;= \"2020-05-01\" & month &lt;= \"2020-05-31\"]) - \n            sum(mayupt[month &gt;= \"2019-05-01\" & month &lt;= \"2019-05-31\"]))\n    \n    print(may_19_to_20)\n\n# A tibble: 1 × 1\n  may_difference\n           &lt;dbl&gt;\n1     -295050652\n\n\nThe month of May also experienced close to 300 million less riders in May 2020 than May 2019. I am sure if we were to investigate the following months as well, we would come to a similar conclusion. It is truly interesting to see the major impact that the pandemic caused in such a short period of time!\n\n\n\n\nWhat Metro Area has the most total amount of Unlinked Passenger Trips? Do they also have the most total Vehicle Revenue Miles?\n\n\n    Total_UPT &lt;- USAGE |&gt; \n    group_by(`Metro_Area`) |&gt; \n    summarize(most_trips = sum(`Unlinked_Passenger_Trips`, na.rm = TRUE)) |&gt;\n    arrange(desc(most_trips))\n  topupt &lt;- Total_UPT |&gt;\n    slice_max(most_trips, n = 1)\nprint(topupt)\n\n# A tibble: 1 × 2\n  Metro_Area                             most_trips\n  &lt;chr&gt;                                       &lt;dbl&gt;\n1 New York--Jersey City--Newark, NY--NJ 84020935224\n\nTotal_VRM_MA &lt;- USAGE |&gt; \n  group_by(`Metro_Area`) |&gt; \n  summarize(most_miles = sum(`Vehicle_Revenue_Miles`, na.rm = TRUE)) |&gt;\n  arrange(desc(most_miles))\ntop_vrm_ma &lt;- Total_VRM_MA |&gt;\n  slice_max(most_miles, n = 1)\nprint(top_vrm_ma)\n\n# A tibble: 1 × 2\n  Metro_Area                             most_miles\n  &lt;chr&gt;                                       &lt;dbl&gt;\n1 New York--Jersey City--Newark, NY--NJ 21190345637\n\n\nThe Metro Area that had the most total amount of Unlinked Passenger Trips was New York–Jersey City–Newark, NY–NJ, with 84020935224 trips. This metro area also has the most total Vehicle Revenue Miles, with 21190345637 miles. It is interesting to see that this metro area is dominant on both lists, especially with the NYC MTA also leading other lists prior.\n\nWhat Date had the most total amount of Vehicle Revenue Miles? What date had the least?\n\n\n  Total_date_T &lt;- USAGE |&gt; \n  group_by(`month`) |&gt; \n  summarize(most_date = sum(`Vehicle_Revenue_Miles`, na.rm = TRUE)) |&gt;\n  arrange(desc(most_date))\ntopdate &lt;- Total_date_T |&gt;\n  slice_max(most_date, n = 1)\nprint(topdate)\n\n# A tibble: 1 × 2\n  month      most_date\n  &lt;date&gt;         &lt;dbl&gt;\n1 2019-10-01 449683378\n\nTotal_date_L &lt;- USAGE |&gt; \n  group_by(`month`) |&gt; \n  summarize(least_date = sum(`Vehicle_Revenue_Miles`, na.rm = TRUE)) |&gt;\n  arrange(desc(least_date))\nlowdate &lt;- Total_date_L |&gt;\n  slice_min(least_date, n = 1)\nprint(lowdate)\n\n# A tibble: 1 × 2\n  month      least_date\n  &lt;date&gt;          &lt;dbl&gt;\n1 2020-04-01  255564356\n\n\nThe date with the most total Vehicle Revenue Miles is October 1, 2019. The date with the least is April 1, 2020. Though I am unsure why October 1, 2019 was a popular date to travel, as there was no holidays or world events happen that day, it makes sense why April 1, 2020 was the lowest, due to COVID.\n\nWhich Metro Area contributed the most to the busiest day of the year in regard to Unlinked Passenger Trips? ? Which contributed the least?\n\n\n Transport_Metro &lt;- USAGE |&gt;\n  filter(month == \"2019-10-1\") |&gt;\n  group_by(Metro_Area) |&gt;\n  summarize(most_metro = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) \n  topmetro &lt;- Transport_Metro |&gt; \n  slice_max(most_metro, n=1)\nprint(topmetro)\n\n# A tibble: 1 × 2\n  Metro_Area                            most_metro\n  &lt;chr&gt;                                      &lt;dbl&gt;\n1 New York--Jersey City--Newark, NY--NJ   87400676\n\ntopmetro &lt;- Transport_Metro |&gt; \n  slice_min(most_metro, n=1)\nprint(topmetro) \n\n# A tibble: 1 × 2\n  Metro_Area  most_metro\n  &lt;chr&gt;            &lt;dbl&gt;\n1 Decatur, AL      25944\n\n\nOn the busiest day of the year for Vehicle Revenue Miles, New York–Jersey City–Newark, NY–NJ contributed the most with 87400676 miles. However, Decatur, AL contributed the least, with only 25944 miles. The New York–Jersey City–Newark, NY–NJ area providing the most to this list is not shocking, as it is also the leader on the list for total VRM.\n\n\n\nNow, we will create a new table from USAGE that also has annual total UPT and VRM for 2022.\n\nUSAGE_2022_ANNUAL &lt;- USAGE |&gt;\n  filter(year(month) == 2022) |&gt;\n  group_by(`NTD ID`, Agency, Metro_Area, Mode, Unlinked_Passenger_Trips, Vehicle_Revenue_Miles) |&gt;\n  summarize(UPT = sum(Unlinked_Passenger_Trips, na.rm = TRUE),\n           VRM = sum(Vehicle_Revenue_Miles, na.rm = TRUE)\n  ) |&gt; \n  ungroup()\n\n`summarise()` has grouped output by 'NTD ID', 'Agency', 'Metro_Area', 'Mode',\n'Unlinked_Passenger_Trips'. You can override using the `.groups` argument.\n\nFINANCIALS &lt;- FINANCIALS |&gt;\n  mutate(Mode=case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\", \n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail and Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramways\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"))\n\nUSAGE_AND_FINANCIALS &lt;- left_join(USAGE_2022_ANNUAL, \n                                  FINANCIALS,\n                                  join_by(`NTD ID`, Mode)) |&gt;\n  drop_na()\n\nWhen I attempted to run the given code the first time, I discovered that the tables were not joining together with all of their values. I quickly realized that this was because the Modes in the Financial table was still known as their short names. For example, the “Heavy Rail” was still referred to as “HR”. Thus, I ran the same code that we did on the USAGE table earlier to manipulate these codes to reflect their proper names. After this, the table formed with no issue.\n\nsample_n(USAGE_AND_FINANCIALS, 1000) |&gt; \n    DT::datatable()\n\n\n\n\n\n\n\n\n\nWhich transit system (agency and mode) had the most UPT in 2022?\n\n\nMTSUPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(mosttsupt = sum(UPT, na.rm = TRUE)) |&gt;\n  arrange(desc(mosttsupt))\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(MTSUPT)\n\n# A tibble: 1,129 × 3\n# Groups:   Agency [525]\n   Agency                                                   Mode       mosttsupt\n   &lt;chr&gt;                                                    &lt;chr&gt;          &lt;dbl&gt;\n 1 MTA New York City Transit                                Heavy Rail    1.79e9\n 2 MTA New York City Transit                                Bus           4.59e8\n 3 Los Angeles County Metropolitan Transportation Authority Bus           1.94e8\n 4 Chicago Transit Authority                                Bus           1.40e8\n 5 New Jersey Transit Corporation                           Bus           1.13e8\n 6 Chicago Transit Authority                                Heavy Rail    1.04e8\n 7 MTA Bus Company                                          Bus           1.00e8\n 8 Washington Metropolitan Area Transit Authority           Heavy Rail    9.84e7\n 9 Southeastern Pennsylvania Transportation Authority       Bus           9.66e7\n10 Washington Metropolitan Area Transit Authority           Bus           8.99e7\n# ℹ 1,119 more rows\n\n\nThe transit system, agency and mode, that had the most UPT in 2022 was the MTA New York City Transit with their Heavy Rail, with a total UPT of 1793073801. This number is way larger than the following on the list, which interestly enough also belongs to the MTA New York City transit and their Bus system.\n\nWhich transit system (agency and mode) had the highest farebox recovery, defined as the highest ratio of Total Fares to Expenses?\n\n\ncolnames(USAGE_AND_FINANCIALS)[colnames(USAGE_AND_FINANCIALS) == \"Total Fares\"] &lt;- \"Total_Fares\"\n\nhighest_farebox &lt;- USAGE_AND_FINANCIALS |&gt;\n  filter( UPT &gt;= 400000) |&gt;\n  mutate(farebox_rate = Total_Fares/Expenses) |&gt; \n  group_by(Agency, Mode) |&gt;\n  summarize(highest_ratio = max (farebox_rate)) |&gt;\n  arrange(desc(highest_ratio))\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(highest_farebox)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                                    Mode  highest_ratio\n   &lt;chr&gt;                                                     &lt;chr&gt;         &lt;dbl&gt;\n 1 Anaheim Transportation Network                            Bus           0.865\n 2 City of Gainesville, FL                                   Bus           0.548\n 3 MTA New York City Transit                                 Heav…         0.435\n 4 Massachusetts Bay Transportation Authority                Heav…         0.375\n 5 Woods Hole, Martha's Vineyard and Nantucket Steamship Au… Ferr…         0.335\n 6 Metro-North Commuter Railroad Company, dba: MTA Metro-No… Comm…         0.331\n 7 Centre Area Transportation Authority                      Bus           0.324\n 8 MTA Long Island Rail Road                                 Comm…         0.286\n 9 Southeastern Pennsylvania Transportation Authority        Heav…         0.253\n10 Regional Transportation Commission of Southern Nevada     Bus           0.252\n# ℹ 136 more rows\n\n\nHere, we can clearly see that the transit system with the highest farebox recovery is Anaheim Transportation Network with their bus transportation. The fairbox recovery for each transit system is found by dividing their Total Fares by their Expenses. Interestingly enough, Anaheim Transportation Network and their buses have a ratio of .865, which is about a 57% greater than the second place spot, which is the City of Gainesville, FL with their buses!\n\nWhich transit system (agency and mode) has the lowest expenses per UPT?\n\n\nlow_expense_UPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  filter( UPT &gt;= 400000) |&gt;\n  mutate(exp_p_upt = Expenses/UPT) |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(lowest_exp_p_upt = min(exp_p_upt)) |&gt;\n  arrange(lowest_exp_p_upt)\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(low_expense_UPT)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                                 Mode  lowest_exp_p_upt\n   &lt;chr&gt;                                                  &lt;chr&gt;            &lt;dbl&gt;\n 1 Anaheim Transportation Network                         Bus               12.8\n 2 University of Georgia                                  Bus               14.9\n 3 University of Michigan Parking and Transportation Ser… Bus               16.2\n 4 Town of Blacksburg                                     Bus               17.5\n 5 Ames Transit Agency                                    Bus               21.5\n 6 Centre Area Transportation Authority                   Bus               23.5\n 7 MTA New York City Transit                              Heav…             31.1\n 8 Greater Lafayette Public Transportation Corporation    Bus               31.5\n 9 San Diego Metropolitan Transit System                  Ligh…             31.6\n10 Champaign-Urbana Mass Transit District                 Bus               39.8\n# ℹ 136 more rows\n\n\nSimilar to the last inquiry , the transit system that has the lowest expenses per UPT is Anaheim Transportation Network with their bus transportation. Their ratio of expenses per UPT is 12.8, which is drastically less than the highest. The highest expense per UPT is Northeast Illinois Regional Commuter Railroad Corporation and their Cable Cars, with a ratio of 600, which is an extreme difference between the two.\n\nWhich transit system (agency and mode) has the highest total fares per UPT?\n\n\nhigh_fare_UPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  filter(UPT &gt;= 400000) |&gt;\n  mutate(totalfares_p_upt = (Total_Fares/UPT)) |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(high_fare_p_upt = max(totalfares_p_upt)) |&gt;\n  arrange(desc(high_fare_p_upt))\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(high_fare_UPT)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                                  Mode  high_fare_p_upt\n   &lt;chr&gt;                                                   &lt;chr&gt;           &lt;dbl&gt;\n 1 New Jersey Transit Corporation                          Bus             536. \n 2 Northeast Illinois Regional Commuter Railroad Corporat… Comm…           265. \n 3 Metro-North Commuter Railroad Company, dba: MTA Metro-… Comm…           161. \n 4 New Jersey Transit Corporation                          Comm…           119. \n 5 MTA New York City Transit                               Comm…           112. \n 6 Massachusetts Bay Transportation Authority              Bus             107. \n 7 Massachusetts Bay Transportation Authority              Comm…            84.4\n 8 Woods Hole, Martha's Vineyard and Nantucket Steamship … Ferr…            78.0\n 9 MTA Long Island Rail Road                               Comm…            73.9\n10 Peninsula Corridor Joint Powers Board                   Comm…            67.5\n# ℹ 136 more rows\n\n\nThe transit system with the highest total fares per UPT is New Jersey Transit Corporation and their buses, with a total fare of 536 to one Unlinked Passenger Trip. This is more than double the second place spot, which goes to Northeast Illinois Regional Commuter Railroad Corporation and their Commuter Bus, with a total fare of 265 to one Unlinked Passenger Trip.\n\nWhich transit system (agency and mode) has the lowest expenses per VRM?\n\nInterestingly enough, I had to change my “Expenses” column name to “expense” for my code to recognize the column instead of the table we established prior, hence the reasoning for that code below.\n\ncolnames(USAGE_AND_FINANCIALS)[colnames(USAGE_AND_FINANCIALS) == \"Expenses\"] &lt;- \"expense\"\n\nlow_exp_vrm&lt;- USAGE_AND_FINANCIALS |&gt;\n  filter(UPT &gt;= 400000) |&gt;\n  mutate(exp_p_vrm = (expense/VRM)) |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(low_exp_p_vrm = min(exp_p_vrm)) |&gt; \n  arrange(low_exp_p_vrm) \n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(low_exp_vrm)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                              Mode       low_exp_p_vrm\n   &lt;chr&gt;                                               &lt;chr&gt;              &lt;dbl&gt;\n 1 Interurban Transit Partnership                      Bus                 77.2\n 2 City of El Paso                                     Bus                 85.8\n 3 Des Moines Area Regional Transit Authority          Bus                 86.3\n 4 Central Florida Regional Transportation Authority   Bus                 87.5\n 5 San Francisco Bay Area Rapid Transit District       Heavy Rail          88.8\n 6 Transportation District Commission of Hampton Roads Bus                 88.9\n 7 City of Gainesville, FL                             Bus                 90.1\n 8 Greater Lafayette Public Transportation Corporation Bus                 90.5\n 9 Ames Transit Agency                                 Bus                 92.0\n10 Delaware Transit Corporation                        Bus                 92.4\n# ℹ 136 more rows\n\n\nThe transit system with the lowest expenses per Vehicle Revenue Miles was Interurban Transit Partnership and their Bus transportation, with an expense of 77.2 per Vehicle Revenue Mile. This is far cheaper than the leader of this category, which is the New York City Department of Transportation and their Ferryboat, with an expense of 771 per vehicle revenue mile. Interestingly enough, out of the ten highest expenses on the list, nine of the most expensive Modes of transportation is the Ferryboat, with only the Cable Car in San Francisco coming in at fourth. This shows that a Ferryboat is most-likely the most expensive transportation mode for transit agencies to run in comparison to its vehicle revenue miles.\n\nWhich transit system (agency and mode) has the highest total fares per VRM?\n\n\nhigh_fare_VRM &lt;- USAGE_AND_FINANCIALS |&gt;\n  filter(UPT &gt;= 400000) |&gt;\n  mutate(totalfares_p_vrm = (Total_Fares/VRM)) |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(high_fare_p_vrm = max(totalfares_p_vrm)) |&gt;\n  arrange(desc(high_fare_p_vrm))\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(high_fare_VRM)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                                  Mode  high_fare_p_vrm\n   &lt;chr&gt;                                                   &lt;chr&gt;           &lt;dbl&gt;\n 1 Washington State Ferries                                Ferr…          1120. \n 2 Woods Hole, Martha's Vineyard and Nantucket Steamship … Ferr…           829. \n 3 New York City Economic Development Corporation          Ferr…           188. \n 4 Anaheim Transportation Network                          Bus             170. \n 5 Massachusetts Bay Transportation Authority              Ligh…           131. \n 6 Port Authority Trans-Hudson Corporation                 Heav…           119. \n 7 Massachusetts Bay Transportation Authority              Heav…           101. \n 8 MTA Long Island Rail Road                               Comm…            98.6\n 9 Metro-North Commuter Railroad Company, dba: MTA Metro-… Comm…            94.4\n10 MTA New York City Transit                               Heav…            91.5\n# ℹ 136 more rows\n\n\nThe transit system with the highest total fares per vehicle revenue miles is Washington State Ferries, with a ratio of 1120 total fares to one vehicle revenue mile. An interesting correlation to the last inquiry is that the top three highest total fares per VRM belong to ferryboats. Furthermore, the highest value on the list is almost 500% greater than the third value, which is 188, and that percentage only grows as that list goes further down.\n\n\n\nIn regard to what transit system in the country is the most effective, it depends on which data points you use to weigh your opinion. If you are considering which system has the highest values in URM and UPT, meaning it is the most frequently used, the answer would be the major transit system of NYC’s MTA Transit. Not only is its heavy rail system extremely prevalent in these numbers, which makes sense since numerous rails span the lengths of New York City and are used daily by many, but the NYC MTA Bus also holds rank compared to others.\nHowever, if you are considering which transit system is the most cost effective, it would have to be the Anaheim Transportation Network. Since a high farebox recovery ratio indicates that a transit system is profitable, Anaheim Transportation Network bus’ numbers alone show that this system is highly more profitable than the rest. This agency also leads margin of lowest expenses per unlinked passenger trip, which shows that not only is this system great at making money, it also great at retaining it and not spending the majority of it on expenses. However, while this is great from a business standpoint, as a passenger this transportation agency ranks high on the total fares per vehicle revenue mile scale, as it is in 4th place. This means that this transportation is fairly expensive to ride compared to the others.\nIn my opinion, I believe that the MTA New York City Transit is the most effective in the country, due to the enormous scale it can run on at a moderate price compared to other agencies."
  },
  {
    "objectID": "mp01.html#this-code-needs-to-be-modified",
    "href": "mp01.html#this-code-needs-to-be-modified",
    "title": "STA 9750 2024 Submission Material",
    "section": "This code needs to be modified",
    "text": "This code needs to be modified\nUSAGE &lt;- USAGE |&gt; mutate(Mode=case_when( Mode == “HR” ~ “Heavy Rail”, Mode == “DR” ~ “Demand Response”, Mode == “FB” ~ “Ferryboat”, Mode == “MB” ~ “Bus”, Mode == “SR” ~ “Streetcar Rail”, Mode == “TB” ~ “Trolleybus”, Mode == “VP” ~ “Vanpool”, Mode == “CB” ~ “Commuter Bus”, Mode == “RB” ~ “Bus Rapid Transit”, Mode == “LR” ~ “Light Rail”, Mode == “YR” ~ “Hybrid Rail”, Mode == “MG” ~ “Monorail and Automated Guideway”, Mode == “CR” ~ “Commuter Rail”, Mode == “AR” ~ “Alaska Railroad”, Mode == “TR” ~ “Aerial Tramways”, Mode == “IP” ~ “Inclined Plane”, Mode == “PB” ~ “Publico”, Mode == “CC” ~ “Cable Car”, TRUE ~ “Unknown”))\n##changing column names (optional) colnames(USAGE)[colnames(USAGE) == “UPT”] &lt;- “Unlinked_Passenger_Trips” colnames(USAGE)[colnames(USAGE) == “VRM”] &lt;- “Vehicle_Revenue_Miles”\nsample_n(USAGE, 1000) |&gt; mutate(month=as.character(month)) |&gt; DT::datatable()\n#Task 3"
  },
  {
    "objectID": "mp01.html#what-transit-agency-had-the-most-total-vrm-in-our-data-set",
    "href": "mp01.html#what-transit-agency-had-the-most-total-vrm-in-our-data-set",
    "title": "STA 9750 2024 Submission Material",
    "section": "1. What transit agency had the most total VRM in our data set?",
    "text": "1. What transit agency had the most total VRM in our data set?\ntotal_vrm_agency &lt;- USAGE |&gt; group_by(Agency) |&gt; summarize(VRM = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt; arrange(desc(VRM)) view(total_vrm_agency)\n###The transit agency that had the most total VRM in our data set was MTA New York City Transit, with a Vehicle Revenue Miles of 10832855350."
  },
  {
    "objectID": "mp01.html#what-transit-mode-had-the-most-total-vrm-in-our-data-set",
    "href": "mp01.html#what-transit-mode-had-the-most-total-vrm-in-our-data-set",
    "title": "STA 9750 2024 Submission Material",
    "section": "2. What transit mode had the most total VRM in our data set?",
    "text": "2. What transit mode had the most total VRM in our data set?\ntotal_vrm_mode &lt;- USAGE |&gt; group_by(Mode) |&gt; summarize(M = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt; arrange(desc(M)) topmode &lt;- total_vrm_mode |&gt; slice_max(M, n = 1) print(topmode)\n\nThe tranist mode that had the most total VRM in our data set was the BUS, with a Vehicle Revenue Miles of 49444494088."
  },
  {
    "objectID": "mp01.html#how-many-trips-were-taken-on-the-nyc-subway-heavy-rail-in-may-2024",
    "href": "mp01.html#how-many-trips-were-taken-on-the-nyc-subway-heavy-rail-in-may-2024",
    "title": "STA 9750 2024 Submission Material",
    "section": "3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?",
    "text": "3. How many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\nNYC_Subway &lt;- USAGE |&gt; month &lt;- as.Date(month)\nfilter(Mode == “Heavy Rail”, month == (“2024-05-01”) & (“2024-05-31”))\nfilter(month %in% c(2024-05-01,2024-05-31))"
  },
  {
    "objectID": "mp01.html#how-much-did-nyc-subway-ridership-fall-between-april-2019-and-april-2020",
    "href": "mp01.html#how-much-did-nyc-subway-ridership-fall-between-april-2019-and-april-2020",
    "title": "STA 9750 2024 Submission Material",
    "section": "5. How much did NYC subway ridership fall between April 2019 and April 2020?",
    "text": "5. How much did NYC subway ridership fall between April 2019 and April 2020?\napril_19 &lt;- USAGE$month |&gt; filter(month &gt;= as.Date(“2019-04-01”) & month &lt;= as.Date(“2029-04-30”))\nUSAGE\\(month &lt;- as.Date(USAGE\\)month)\napril_19 &lt;- USAGE$month |&gt; filter(Date &gt;= as.Date(“2019-04-01”) & Date &lt;= as.Date(“2029-04-30”))\n#Task 4"
  },
  {
    "objectID": "mp01.html#what-metro-area-has-the-most-total-amount-of-unlinked-passenger-trips-do-they-also-have-the-most-total-vehicle-revenue-miles",
    "href": "mp01.html#what-metro-area-has-the-most-total-amount-of-unlinked-passenger-trips-do-they-also-have-the-most-total-vehicle-revenue-miles",
    "title": "STA 9750 2024 Submission Material",
    "section": "1. What Metro Area has the most total amount of Unlinked Passenger Trips? Do they also have the most total Vehicle Revenue Miles?",
    "text": "1. What Metro Area has the most total amount of Unlinked Passenger Trips? Do they also have the most total Vehicle Revenue Miles?\nTotal_UPT &lt;- USAGE |&gt; group_by(Metro_Area) |&gt; summarize(most_trips = sum(Unlinked_Passenger_Trips, na.rm = TRUE)) |&gt; arrange(desc(most_trips)) topupt &lt;- Total_UPT |&gt; slice_max(most_trips, n = 1) print(topupt)\nTotal_VRM_MA &lt;- USAGE |&gt; group_by(Metro_Area) |&gt; summarize(most_miles = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt; arrange(desc(most_miles)) top_vrm_ma &lt;- Total_VRM_MA |&gt; slice_max(most_miles, n = 1) print(top_vrm_ma)\n\nThe Metro Area that had the most total amount of Unlinked Passenger Trips was New York–Jersey City–Newwark, NY–NJ, with 84020935224 trips.\n\n\nThis metro area also has the most total Vehicle Revenue Miles, with 21190345637 miles."
  },
  {
    "objectID": "mp01.html#what-date-had-the-most-total-amount-of-vehicle-revenue-miles-what-date-has-the-least",
    "href": "mp01.html#what-date-had-the-most-total-amount-of-vehicle-revenue-miles-what-date-has-the-least",
    "title": "STA 9750 2024 Submission Material",
    "section": "2. What Date had the most total amount of Vehicle Revenue Miles? What date has the least?",
    "text": "2. What Date had the most total amount of Vehicle Revenue Miles? What date has the least?\nTotal_date_T &lt;- USAGE |&gt; group_by(month) |&gt; summarize(most_date = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt; arrange(desc(most_date)) topdate &lt;- Total_date_T |&gt; slice_max(most_date, n = 1) print(topdate)\nTotal_date_L &lt;- USAGE |&gt; group_by(month) |&gt; summarize(least_date = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt; arrange(desc(least_date)) lowdate &lt;- Total_date_L |&gt; slice_min(least_date, n = 1) print(lowdate)\n\nThe date with the most total Vehicle Revenue Miles is October 1, 2019. The date with the least is April 1, 2020."
  },
  {
    "objectID": "mp01.html#which-metro-area-contributed-the-most-to-the-busiest-day-of-the-year-which-contributed-the-least",
    "href": "mp01.html#which-metro-area-contributed-the-most-to-the-busiest-day-of-the-year-which-contributed-the-least",
    "title": "STA 9750 2024 Submission Material",
    "section": "3. Which Metro Area contributed the most to the busiest day of the year? Which contributed the least?",
    "text": "3. Which Metro Area contributed the most to the busiest day of the year? Which contributed the least?\nTransport_Metro &lt;- USAGE |&gt; filter(month == “2019-10-1”) |&gt; group_by(Metro_Area) |&gt; summarize(most_metro = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) topmetro &lt;- Transport_Metro |&gt; slice_max(most_metro, n=1) print(topmetro)\ntopmetro &lt;- Transport_Metro |&gt; slice_min(most_metro, n=1) print(topmetro)\n\nOn the busiest day of the year for Vehicle Revenue Miles, New York–Jersey City–Newark, NY–NJ contributed the most with 87400676 miles.\n\n\nHowever, Decatur, AL contributed the least, with only 25944 miles.\n#Task 5"
  },
  {
    "objectID": "mp01.html#introduction",
    "href": "mp01.html#introduction",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "This project was taken as inspiration from a YouTuber City Nerd, who created a video about the “10 Transit Services That Do Huge Numbers at the Farebox”. Farebox Recovery is the fraction of revenues raised from fares instead of taxes.\nFor this project, we will use data from the National Transit Database as our primary source. The following tables/reports will be used:\n\nThe 2022 Fare Revenue table, in which we will mostly explore revenue.\nThe lastest Monthly Ridership tables, in which we will mostly explore the Unlinked Passenger Trips (UPT) and Vehicle Revenue Miles (VRM).\nThe 2022 Operating Expenses reports, in which we will mostly explore expenses.\n\nWe will use the 2022 verson of all reports, as up-to-date data and newer reports are often uploaded on a lag."
  },
  {
    "objectID": "index.html#my-dogs",
    "href": "index.html#my-dogs",
    "title": "My Website",
    "section": "My Dogs!",
    "text": "My Dogs!\nI have two dogs! Their names are:\n\nMacaroni\n\nMacaroni (Mack) is technically my brother’s dog, but we babysit him while he’s at work.\nHe is a Golden Retreiver and is 2 years old!\n\n\nRusty\n\nRusty is extremely loving and the smartest dog I have ever met.\nHe is a Pitbull/Lab mix and is 13 years old (we think, he’s a rescue)!"
  },
  {
    "objectID": "mp01.html#getting-started",
    "href": "mp01.html#getting-started",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "First, we must download, clean, and join the tables.\nUnfortunately, the code that allowed the immediate download of the data sets did not work for me. So instead, I had to download the data and import it into R, which is seen in my code below.\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(readxl)\nlibrary(readr)\n\nFARES &lt;- read_excel(\"Miniproject001/2022 Fare Revenue (1).xlsx\") |&gt;\n  select(-`State/Parent NTD ID`, \n         -`Reporter Type`,\n         -`Reporting Module`,\n         -`TOS`,\n         -`Passenger Paid Fares`,\n         -`Organization Paid Fares`) |&gt;\n  filter(`Expense Type` == \"Funds Earned During Period\") |&gt;\n  select(-`Expense Type`) |&gt;\n  group_by(`NTD ID`,       # Sum over different `TOS` for the same `Mode`\n           `Agency Name`,  # These are direct operated and sub-contracted \n           `Mode`) |&gt;      # of the same transit modality\n  # Not a big effect in most munis (significant DO\n  # tends to get rid of sub-contractors), but we'll sum\n  # to unify different passenger experiences\n  summarize(`Total Fares` = sum(`Total Fares`)) |&gt;\n  ungroup()\n\n`summarise()` has grouped output by 'NTD ID', 'Agency Name'. You can override\nusing the `.groups` argument.\n\nEXPENSES &lt;- read_csv(\"Miniproject001/2022_NTD_Annual_Data_-_Operating_Expenses__by_Function__20231102.csv\") |&gt;\n  select(`NTD ID`, \n         `Agency`,\n         `Total`, \n         `Mode`) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\n  rename(Expenses = Total) |&gt;\n  group_by(`NTD ID`, `Mode`) |&gt;\n  summarize(Expenses = sum(Expenses)) |&gt;\n  ungroup()\n\nRows: 3744 Columns: 29\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (9): Agency, City, State, Organization Type, Reporter Type, UZA Name, M...\ndbl (13): NTD ID, Report Year, UACE Code, Primary UZA Population, Agency VOM...\nlgl  (7): Vehicle Operations Questionable, Vehicle Maintenance Questionable,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n`summarise()` has grouped output by 'NTD ID'. You can override using the `.groups` argument.\n\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n\nNow, we must extract the monthly transit numbers. My computer struggled to read the whole file for ridership, so I split it into two respective files, one for UPT and one for VRM. This is seen in my code below.\n\nTRIPS &lt;- read_excel(\"Miniproject001/Ridership_UPT.xlsx\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(-`Legacy NTD ID`, \n         -`Reporter Type`, \n         -`Mode/Type of Service Status`, \n         -`UACE CD`, \n         -`TOS`) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`), \n               names_to=\"month\", \n               values_to=\"UPT\") |&gt;\n  drop_na() |&gt;\n  mutate(month=my(month)) # Parse _m_onth _y_ear date specs\n\n\nMILES &lt;- read_excel(\"Miniproject001/Ridership_VRN.xlsx\") |&gt;\n  filter(`Mode/Type of Service Status` == \"Active\") |&gt;\n  select(-`Legacy NTD ID`, \n         -`Reporter Type`, \n         -`Mode/Type of Service Status`, \n         -`UACE CD`, \n         -`TOS`) |&gt;\n  pivot_longer(-c(`NTD ID`:`3 Mode`), \n               names_to=\"month\", \n               values_to=\"VRM\") |&gt;\n  drop_na() |&gt;\n  group_by(`NTD ID`, `Agency`, `UZA Name`, \n           `Mode`, `3 Mode`, month) |&gt;\n  summarize(VRM = sum(VRM)) |&gt;\n  ungroup() |&gt;\n  mutate(month=my(month)) # Parse _m_onth _y_ear date specs\n\n`summarise()` has grouped output by 'NTD ID', 'Agency', 'UZA Name', 'Mode', '3\nMode'. You can override using the `.groups` argument.\n\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\n  mutate(`NTD ID` = as.integer(`NTD ID`))\n\nJoining with `by = join_by(`NTD ID`, Agency, `UZA Name`, Mode, `3 Mode`,\nmonth)`\n\n\nNow, this creates the table as follows:\n\nif(!require(\"DT\")) install.packages(\"DT\")\n\nLoading required package: DT\n\nlibrary(DT)\n\nsample_n(USAGE, 1000) |&gt; \n    mutate(month=as.character(month)) |&gt; \n    DT::datatable()"
  },
  {
    "objectID": "mp01.html#task-1--creating-syntatic-names",
    "href": "mp01.html#task-1--creating-syntatic-names",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "Here, I decided to rename three of the columns in my table, one to remove spaces so it is easier to manipulate in code, and the other to have more common names for easier understanding. Thus, I wanted:\n\n“UZA Name” to become “Metro_Area”\n“UPT” to become “Unlinked_Passenger_Trips”\n“VRM” to become “Vehicle Revenue Miles”\n\nSo, I did this with the following code:\n\ncolnames(USAGE)[colnames(USAGE) == \"UZA Name\"] &lt;- \"Metro_Area\"\ncolnames(USAGE)[colnames(USAGE) == \"UPT\"] &lt;- \"Unlinked_Passenger_Trips\"\ncolnames(USAGE)[colnames(USAGE) == \"VRM\"] &lt;- \"Vehicle_Revenue_Miles\"\n\nAnd then I reloaded my table to see if the columns changed/looked good. They did!\n\nlibrary(DT)\n\nsample_n(USAGE, 1) |&gt; \n    mutate(month=as.character(month)) |&gt; \n    DT::datatable()"
  },
  {
    "objectID": "mp01.html#task-1-creating-syntatic-names",
    "href": "mp01.html#task-1-creating-syntatic-names",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "Here, I decided to rename three of the columns in my table, one to remove spaces so it is easier to manipulate in code, and the other to have more common names for easier understanding. Thus, I wanted:\n\n“UZA Name” to become “Metro_Area”\n“UPT” to become “Unlinked_Passenger_Trips”\n“VRM” to become “Vehicle Revenue Miles”\n\nSo, I did this with the following code:\n\ncolnames(USAGE)[colnames(USAGE) == \"UZA Name\"] &lt;- \"Metro_Area\"\ncolnames(USAGE)[colnames(USAGE) == \"UPT\"] &lt;- \"Unlinked_Passenger_Trips\"\ncolnames(USAGE)[colnames(USAGE) == \"VRM\"] &lt;- \"Vehicle_Revenue_Miles\"\n\nAnd then I reloaded my table to see if the columns changed/looked good. They did!\n\nlibrary(DT)\n\nsample_n(USAGE, 1) |&gt; \n    mutate(month=as.character(month)) |&gt; \n    DT::datatable()"
  },
  {
    "objectID": "mp01.html#task-2-recording-the-mode-column",
    "href": "mp01.html#task-2-recording-the-mode-column",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "First, I needed to know what the unique codes were used in the Mode column in our data set. To do this, I ran the following command, which produced the following 18 codes:\n\ndistinct(USAGE, Mode)\n\n# A tibble: 18 × 1\n   Mode \n   &lt;chr&gt;\n 1 DR   \n 2 FB   \n 3 MB   \n 4 SR   \n 5 TB   \n 6 VP   \n 7 CB   \n 8 RB   \n 9 LR   \n10 YR   \n11 MG   \n12 CR   \n13 AR   \n14 TR   \n15 HR   \n16 IP   \n17 PB   \n18 CC   \n\n\nUsing the Glossary on the National Transit Database website, I forced search each of these codes to find their corresponding name. Then, I recoded my table to display these names.\n\nUSAGE &lt;- USAGE |&gt;\n  mutate(Mode=case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\", \n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail and Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramways\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"))\n\nThus, my cleaned-up table became:\n\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\n\nsample_n(USAGE, 1000) |&gt; \n    mutate(month=as.character(month)) |&gt; \n    DT::datatable()"
  },
  {
    "objectID": "mp01.html#task-3-answering-the-intructor-specified-questions-with-dplyr.",
    "href": "mp01.html#task-3-answering-the-intructor-specified-questions-with-dplyr.",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "What transit agency had the most total VRM in our data set?\n\n\ntotal_vrm_agency &lt;- USAGE |&gt; \n  group_by(`Agency`) |&gt; \n  summarize(VRM = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt;\n  arrange(desc(VRM))\n  tvrm &lt;- total_vrm_agency |&gt;\n    slice_max(VRM, n = 1)\n  print(tvrm)\n\n# A tibble: 1 × 2\n  Agency                            VRM\n  &lt;chr&gt;                           &lt;dbl&gt;\n1 MTA New York City Transit 10832855350\n\n\nThus, the transit agency that had the most total VRM in our data set was MTA New York City Transit, with a Vehicle Revenue Miles of 10832855350. This makes sense, as public transit easily spans the entirety of New York City, whether it be the subway, buses, the ferry, or more. Since public transit is prevalent in our lives as New Yorkers, with many not even owning their own vehicle and solely relying on public transit, it is understandable that NYC is top of the list.\n\nWhat transit mode had the most total VRM in our data set?\n\n\n  total_vrm_mode &lt;- USAGE |&gt; \n    group_by(`Mode`) |&gt; \n    summarize(M = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) |&gt;\n    arrange(desc(M))\n    topmode &lt;- total_vrm_mode |&gt;\n      slice_max(M, n = 1)\n    print(topmode)\n\n# A tibble: 1 × 2\n  Mode            M\n  &lt;chr&gt;       &lt;dbl&gt;\n1 Bus   49444494088\n\n\nThe transit mode that had the most total VRM in our data set was the BUS, with a Vehicle Revenue Miles of 49444494088.\n\nHow many trips were taken on the NYC subway (Heavy Rail) in May 2024?\n\n\n    May24Subway &lt;- USAGE |&gt;\n      filter(Mode == \"Heavy Rail\", month &gt;= \"2024-05-01\", month &lt;= \"2024-05-31\") |&gt;\n      summarize(may_sub = sum(Unlinked_Passenger_Trips, na.rm = TRUE))\n    \n    print(May24Subway)\n\n# A tibble: 1 × 1\n    may_sub\n      &lt;dbl&gt;\n1 237383777\n\n\nSo, in May 2024, 237383777 unlinked passenger trips were taken on the NYC subway (Heavy Rail). Again, I believe that this checks out, especially with the way many New Yorkers rely on the subway to get around Manhatten during the work day.\n\nHow much did NYC subway ridership fall between April 2019 and April 2020?\n\n\n  april_19_to_20 &lt;- USAGE |&gt;\n      filter(Mode == \"Heavy Rail\", \n             (month &gt;= \"2019-04-01\" & month &lt;= \"2019-04-30\") |\n             (month &gt;= \"2020-04-01\" & month &lt;= \"2020-04-30\"))|&gt;\n      group_by(month) |&gt;\n      summarize(aprupt = sum(Unlinked_Passenger_Trips, na.rm = TRUE)) |&gt;\n      summarize(april_difference = \n            sum(aprupt[month &gt;= \"2020-04-01\" & month &lt;= \"2020-04-30\"]) - \n            sum(aprupt[month &gt;= \"2019-04-01\" & month &lt;= \"2019-04-30\"]))\n    \n    print(april_19_to_20)\n\n# A tibble: 1 × 1\n  april_difference\n             &lt;dbl&gt;\n1       -296416858\n\n\nHere, we can see that 296416858 less riders used the NYC Subway in April 2020 than April 2019. This makes a lot of sense, as April 2020 was the true start of lock down we faced because of the Covid-19 Pandemic. Whether riders were terrified to leave their homes in fear of contracting the virus or they were listening to the mandate to stay inside unless it is for an emergency, it is not a shock that the MTA had almost 300 million less riders in comparison.\nTo further prove this point, let’s consider the same comparison, but for May 2019 and May 2020.\n\n  may_19_to_20 &lt;- USAGE |&gt;\n      filter(Mode == \"Heavy Rail\", \n             (month &gt;= \"2019-05-01\" & month &lt;= \"2019-05-31\") |\n             (month &gt;= \"2020-05-01\" & month &lt;= \"2020-05-31\"))|&gt;\n      group_by(month) |&gt;\n      summarize(mayupt = sum(Unlinked_Passenger_Trips, na.rm = TRUE)) |&gt;\n      summarize(may_difference = \n            sum(mayupt[month &gt;= \"2020-05-01\" & month &lt;= \"2020-05-31\"]) - \n            sum(mayupt[month &gt;= \"2019-05-01\" & month &lt;= \"2019-05-31\"]))\n    \n    print(may_19_to_20)\n\n# A tibble: 1 × 1\n  may_difference\n           &lt;dbl&gt;\n1     -295050652\n\n\nThe month of May also experienced close to 300 million less riders in May 2020 than May 2019. I am sure if we were to investigate the following months as well, we would come to a similar conclusion. It is truly interesting to see the major impact that the pandemic caused in such a short period of time!"
  },
  {
    "objectID": "mp01.html#task-4-explore-and-analyze",
    "href": "mp01.html#task-4-explore-and-analyze",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "What Metro Area has the most total amount of Unlinked Passenger Trips? Do they also have the most total Vehicle Revenue Miles?\n\n\n    Total_UPT &lt;- USAGE |&gt; \n    group_by(`Metro_Area`) |&gt; \n    summarize(most_trips = sum(`Unlinked_Passenger_Trips`, na.rm = TRUE)) |&gt;\n    arrange(desc(most_trips))\n  topupt &lt;- Total_UPT |&gt;\n    slice_max(most_trips, n = 1)\nprint(topupt)\n\n# A tibble: 1 × 2\n  Metro_Area                             most_trips\n  &lt;chr&gt;                                       &lt;dbl&gt;\n1 New York--Jersey City--Newark, NY--NJ 84020935224\n\nTotal_VRM_MA &lt;- USAGE |&gt; \n  group_by(`Metro_Area`) |&gt; \n  summarize(most_miles = sum(`Vehicle_Revenue_Miles`, na.rm = TRUE)) |&gt;\n  arrange(desc(most_miles))\ntop_vrm_ma &lt;- Total_VRM_MA |&gt;\n  slice_max(most_miles, n = 1)\nprint(top_vrm_ma)\n\n# A tibble: 1 × 2\n  Metro_Area                             most_miles\n  &lt;chr&gt;                                       &lt;dbl&gt;\n1 New York--Jersey City--Newark, NY--NJ 21190345637\n\n\nThe Metro Area that had the most total amount of Unlinked Passenger Trips was New York–Jersey City–Newark, NY–NJ, with 84020935224 trips. This metro area also has the most total Vehicle Revenue Miles, with 21190345637 miles. It is interesting to see that this metro area is dominant on both lists, especially with the NYC MTA also leading other lists prior.\n\nWhat Date had the most total amount of Vehicle Revenue Miles? What date had the least?\n\n\n  Total_date_T &lt;- USAGE |&gt; \n  group_by(`month`) |&gt; \n  summarize(most_date = sum(`Vehicle_Revenue_Miles`, na.rm = TRUE)) |&gt;\n  arrange(desc(most_date))\ntopdate &lt;- Total_date_T |&gt;\n  slice_max(most_date, n = 1)\nprint(topdate)\n\n# A tibble: 1 × 2\n  month      most_date\n  &lt;date&gt;         &lt;dbl&gt;\n1 2019-10-01 449683378\n\nTotal_date_L &lt;- USAGE |&gt; \n  group_by(`month`) |&gt; \n  summarize(least_date = sum(`Vehicle_Revenue_Miles`, na.rm = TRUE)) |&gt;\n  arrange(desc(least_date))\nlowdate &lt;- Total_date_L |&gt;\n  slice_min(least_date, n = 1)\nprint(lowdate)\n\n# A tibble: 1 × 2\n  month      least_date\n  &lt;date&gt;          &lt;dbl&gt;\n1 2020-04-01  255564356\n\n\nThe date with the most total Vehicle Revenue Miles is October 1, 2019. The date with the least is April 1, 2020. Though I am unsure why October 1, 2019 was a popular date to travel, as there was no holidays or world events happen that day, it makes sense why April 1, 2020 was the lowest, due to COVID.\n\nWhich Metro Area contributed the most to the busiest day of the year in regard to Unlinked Passenger Trips? ? Which contributed the least?\n\n\n Transport_Metro &lt;- USAGE |&gt;\n  filter(month == \"2019-10-1\") |&gt;\n  group_by(Metro_Area) |&gt;\n  summarize(most_metro = sum(Vehicle_Revenue_Miles, na.rm = TRUE)) \n  topmetro &lt;- Transport_Metro |&gt; \n  slice_max(most_metro, n=1)\nprint(topmetro)\n\n# A tibble: 1 × 2\n  Metro_Area                            most_metro\n  &lt;chr&gt;                                      &lt;dbl&gt;\n1 New York--Jersey City--Newark, NY--NJ   87400676\n\ntopmetro &lt;- Transport_Metro |&gt; \n  slice_min(most_metro, n=1)\nprint(topmetro) \n\n# A tibble: 1 × 2\n  Metro_Area  most_metro\n  &lt;chr&gt;            &lt;dbl&gt;\n1 Decatur, AL      25944\n\n\nOn the busiest day of the year for Vehicle Revenue Miles, New York–Jersey City–Newark, NY–NJ contributed the most with 87400676 miles. However, Decatur, AL contributed the least, with only 25944 miles. The New York–Jersey City–Newark, NY–NJ area providing the most to this list is not shocking, as it is also the leader on the list for total VRM."
  },
  {
    "objectID": "mp01.html#task-5-table-summarization",
    "href": "mp01.html#task-5-table-summarization",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "Now, we will create a new table from USAGE that also has annual total UPT and VRM for 2022.\n\nUSAGE_2022_ANNUAL &lt;- USAGE |&gt;\n  filter(year(month) == 2022) |&gt;\n  group_by(`NTD ID`, Agency, Metro_Area, Mode, Unlinked_Passenger_Trips, Vehicle_Revenue_Miles) |&gt;\n  summarize(UPT = sum(Unlinked_Passenger_Trips, na.rm = TRUE),\n           VRM = sum(Vehicle_Revenue_Miles, na.rm = TRUE)\n  ) |&gt; \n  ungroup()\n\n`summarise()` has grouped output by 'NTD ID', 'Agency', 'Metro_Area', 'Mode',\n'Unlinked_Passenger_Trips'. You can override using the `.groups` argument.\n\nFINANCIALS &lt;- FINANCIALS |&gt;\n  mutate(Mode=case_when(\n    Mode == \"HR\" ~ \"Heavy Rail\", \n    Mode == \"DR\" ~ \"Demand Response\",\n    Mode == \"FB\" ~ \"Ferryboat\",\n    Mode == \"MB\" ~ \"Bus\",\n    Mode == \"SR\" ~ \"Streetcar Rail\",\n    Mode == \"TB\" ~ \"Trolleybus\",\n    Mode == \"VP\" ~ \"Vanpool\",\n    Mode == \"CB\" ~ \"Commuter Bus\",\n    Mode == \"RB\" ~ \"Bus Rapid Transit\",\n    Mode == \"LR\" ~ \"Light Rail\",\n    Mode == \"YR\" ~ \"Hybrid Rail\",\n    Mode == \"MG\" ~ \"Monorail and Automated Guideway\",\n    Mode == \"CR\" ~ \"Commuter Rail\",\n    Mode == \"AR\" ~ \"Alaska Railroad\",\n    Mode == \"TR\" ~ \"Aerial Tramways\",\n    Mode == \"IP\" ~ \"Inclined Plane\",\n    Mode == \"PB\" ~ \"Publico\",\n    Mode == \"CC\" ~ \"Cable Car\",\n    TRUE ~ \"Unknown\"))\n\nUSAGE_AND_FINANCIALS &lt;- left_join(USAGE_2022_ANNUAL, \n                                  FINANCIALS,\n                                  join_by(`NTD ID`, Mode)) |&gt;\n  drop_na()\n\nWhen I attempted to run the given code the first time, I discovered that the tables were not joining together with all of their values. I quickly realized that this was because the Modes in the Financial table was still known as their short names. For example, the “Heavy Rail” was still referred to as “HR”. Thus, I ran the same code that we did on the USAGE table earlier to manipulate these codes to reflect their proper names. After this, the table formed with no issue.\n\nsample_n(USAGE_AND_FINANCIALS, 1000) |&gt; \n    DT::datatable()"
  },
  {
    "objectID": "mp01.html#task-6-farebox-recovery-among-major-systems",
    "href": "mp01.html#task-6-farebox-recovery-among-major-systems",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "Which transit system (agency and mode) had the most UPT in 2022?\n\n\nMTSUPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(mosttsupt = sum(UPT, na.rm = TRUE)) |&gt;\n  arrange(desc(mosttsupt))\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(MTSUPT)\n\n# A tibble: 1,129 × 3\n# Groups:   Agency [525]\n   Agency                                                   Mode       mosttsupt\n   &lt;chr&gt;                                                    &lt;chr&gt;          &lt;dbl&gt;\n 1 MTA New York City Transit                                Heavy Rail    1.79e9\n 2 MTA New York City Transit                                Bus           4.59e8\n 3 Los Angeles County Metropolitan Transportation Authority Bus           1.94e8\n 4 Chicago Transit Authority                                Bus           1.40e8\n 5 New Jersey Transit Corporation                           Bus           1.13e8\n 6 Chicago Transit Authority                                Heavy Rail    1.04e8\n 7 MTA Bus Company                                          Bus           1.00e8\n 8 Washington Metropolitan Area Transit Authority           Heavy Rail    9.84e7\n 9 Southeastern Pennsylvania Transportation Authority       Bus           9.66e7\n10 Washington Metropolitan Area Transit Authority           Bus           8.99e7\n# ℹ 1,119 more rows\n\n\nThe transit system, agency and mode, that had the most UPT in 2022 was the MTA New York City Transit with their Heavy Rail, with a total UPT of 1793073801. This number is way larger than the following on the list, which interestly enough also belongs to the MTA New York City transit and their Bus system.\n\nWhich transit system (agency and mode) had the highest farebox recovery, defined as the highest ratio of Total Fares to Expenses?\n\n\ncolnames(USAGE_AND_FINANCIALS)[colnames(USAGE_AND_FINANCIALS) == \"Total Fares\"] &lt;- \"Total_Fares\"\n\nhighest_farebox &lt;- USAGE_AND_FINANCIALS |&gt;\n  filter( UPT &gt;= 400000) |&gt;\n  mutate(farebox_rate = Total_Fares/Expenses) |&gt; \n  group_by(Agency, Mode) |&gt;\n  summarize(highest_ratio = max (farebox_rate)) |&gt;\n  arrange(desc(highest_ratio))\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(highest_farebox)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                                    Mode  highest_ratio\n   &lt;chr&gt;                                                     &lt;chr&gt;         &lt;dbl&gt;\n 1 Anaheim Transportation Network                            Bus           0.865\n 2 City of Gainesville, FL                                   Bus           0.548\n 3 MTA New York City Transit                                 Heav…         0.435\n 4 Massachusetts Bay Transportation Authority                Heav…         0.375\n 5 Woods Hole, Martha's Vineyard and Nantucket Steamship Au… Ferr…         0.335\n 6 Metro-North Commuter Railroad Company, dba: MTA Metro-No… Comm…         0.331\n 7 Centre Area Transportation Authority                      Bus           0.324\n 8 MTA Long Island Rail Road                                 Comm…         0.286\n 9 Southeastern Pennsylvania Transportation Authority        Heav…         0.253\n10 Regional Transportation Commission of Southern Nevada     Bus           0.252\n# ℹ 136 more rows\n\n\nHere, we can clearly see that the transit system with the highest farebox recovery is Anaheim Transportation Network with their bus transportation. The fairbox recovery for each transit system is found by dividing their Total Fares by their Expenses. Interestingly enough, Anaheim Transportation Network and their buses have a ratio of .865, which is about a 57% greater than the second place spot, which is the City of Gainesville, FL with their buses!\n\nWhich transit system (agency and mode) has the lowest expenses per UPT?\n\n\nlow_expense_UPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  filter( UPT &gt;= 400000) |&gt;\n  mutate(exp_p_upt = Expenses/UPT) |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(lowest_exp_p_upt = min(exp_p_upt)) |&gt;\n  arrange(lowest_exp_p_upt)\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(low_expense_UPT)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                                 Mode  lowest_exp_p_upt\n   &lt;chr&gt;                                                  &lt;chr&gt;            &lt;dbl&gt;\n 1 Anaheim Transportation Network                         Bus               12.8\n 2 University of Georgia                                  Bus               14.9\n 3 University of Michigan Parking and Transportation Ser… Bus               16.2\n 4 Town of Blacksburg                                     Bus               17.5\n 5 Ames Transit Agency                                    Bus               21.5\n 6 Centre Area Transportation Authority                   Bus               23.5\n 7 MTA New York City Transit                              Heav…             31.1\n 8 Greater Lafayette Public Transportation Corporation    Bus               31.5\n 9 San Diego Metropolitan Transit System                  Ligh…             31.6\n10 Champaign-Urbana Mass Transit District                 Bus               39.8\n# ℹ 136 more rows\n\n\nSimilar to the last inquiry , the transit system that has the lowest expenses per UPT is Anaheim Transportation Network with their bus transportation. Their ratio of expenses per UPT is 12.8, which is drastically less than the highest. The highest expense per UPT is Northeast Illinois Regional Commuter Railroad Corporation and their Cable Cars, with a ratio of 600, which is an extreme difference between the two.\n\nWhich transit system (agency and mode) has the highest total fares per UPT?\n\n\nhigh_fare_UPT &lt;- USAGE_AND_FINANCIALS |&gt;\n  filter(UPT &gt;= 400000) |&gt;\n  mutate(totalfares_p_upt = (Total_Fares/UPT)) |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(high_fare_p_upt = max(totalfares_p_upt)) |&gt;\n  arrange(desc(high_fare_p_upt))\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(high_fare_UPT)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                                  Mode  high_fare_p_upt\n   &lt;chr&gt;                                                   &lt;chr&gt;           &lt;dbl&gt;\n 1 New Jersey Transit Corporation                          Bus             536. \n 2 Northeast Illinois Regional Commuter Railroad Corporat… Comm…           265. \n 3 Metro-North Commuter Railroad Company, dba: MTA Metro-… Comm…           161. \n 4 New Jersey Transit Corporation                          Comm…           119. \n 5 MTA New York City Transit                               Comm…           112. \n 6 Massachusetts Bay Transportation Authority              Bus             107. \n 7 Massachusetts Bay Transportation Authority              Comm…            84.4\n 8 Woods Hole, Martha's Vineyard and Nantucket Steamship … Ferr…            78.0\n 9 MTA Long Island Rail Road                               Comm…            73.9\n10 Peninsula Corridor Joint Powers Board                   Comm…            67.5\n# ℹ 136 more rows\n\n\nThe transit system with the highest total fares per UPT is New Jersey Transit Corporation and their buses, with a total fare of 536 to one Unlinked Passenger Trip. This is more than double the second place spot, which goes to Northeast Illinois Regional Commuter Railroad Corporation and their Commuter Bus, with a total fare of 265 to one Unlinked Passenger Trip.\n\nWhich transit system (agency and mode) has the lowest expenses per VRM?\n\nInterestingly enough, I had to change my “Expenses” column name to “expense” for my code to recognize the column instead of the table we established prior, hence the reasoning for that code below.\n\ncolnames(USAGE_AND_FINANCIALS)[colnames(USAGE_AND_FINANCIALS) == \"Expenses\"] &lt;- \"expense\"\n\nlow_exp_vrm&lt;- USAGE_AND_FINANCIALS |&gt;\n  filter(UPT &gt;= 400000) |&gt;\n  mutate(exp_p_vrm = (expense/VRM)) |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(low_exp_p_vrm = min(exp_p_vrm)) |&gt; \n  arrange(low_exp_p_vrm) \n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(low_exp_vrm)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                              Mode       low_exp_p_vrm\n   &lt;chr&gt;                                               &lt;chr&gt;              &lt;dbl&gt;\n 1 Interurban Transit Partnership                      Bus                 77.2\n 2 City of El Paso                                     Bus                 85.8\n 3 Des Moines Area Regional Transit Authority          Bus                 86.3\n 4 Central Florida Regional Transportation Authority   Bus                 87.5\n 5 San Francisco Bay Area Rapid Transit District       Heavy Rail          88.8\n 6 Transportation District Commission of Hampton Roads Bus                 88.9\n 7 City of Gainesville, FL                             Bus                 90.1\n 8 Greater Lafayette Public Transportation Corporation Bus                 90.5\n 9 Ames Transit Agency                                 Bus                 92.0\n10 Delaware Transit Corporation                        Bus                 92.4\n# ℹ 136 more rows\n\n\nThe transit system with the lowest expenses per Vehicle Revenue Miles was Interurban Transit Partnership and their Bus transportation, with an expense of 77.2 per Vehicle Revenue Mile. This is far cheaper than the leader of this category, which is the New York City Department of Transportation and their Ferryboat, with an expense of 771 per vehicle revenue mile. Interestingly enough, out of the ten highest expenses on the list, nine of the most expensive Modes of transportation is the Ferryboat, with only the Cable Car in San Francisco coming in at fourth. This shows that a Ferryboat is most-likely the most expensive transportation mode for transit agencies to run in comparison to its vehicle revenue miles.\n\nWhich transit system (agency and mode) has the highest total fares per VRM?\n\n\nhigh_fare_VRM &lt;- USAGE_AND_FINANCIALS |&gt;\n  filter(UPT &gt;= 400000) |&gt;\n  mutate(totalfares_p_vrm = (Total_Fares/VRM)) |&gt;\n  group_by(Agency, Mode) |&gt;\n  summarize(high_fare_p_vrm = max(totalfares_p_vrm)) |&gt;\n  arrange(desc(high_fare_p_vrm))\n\n`summarise()` has grouped output by 'Agency'. You can override using the\n`.groups` argument.\n\nprint(high_fare_VRM)\n\n# A tibble: 146 × 3\n# Groups:   Agency [112]\n   Agency                                                  Mode  high_fare_p_vrm\n   &lt;chr&gt;                                                   &lt;chr&gt;           &lt;dbl&gt;\n 1 Washington State Ferries                                Ferr…          1120. \n 2 Woods Hole, Martha's Vineyard and Nantucket Steamship … Ferr…           829. \n 3 New York City Economic Development Corporation          Ferr…           188. \n 4 Anaheim Transportation Network                          Bus             170. \n 5 Massachusetts Bay Transportation Authority              Ligh…           131. \n 6 Port Authority Trans-Hudson Corporation                 Heav…           119. \n 7 Massachusetts Bay Transportation Authority              Heav…           101. \n 8 MTA Long Island Rail Road                               Comm…            98.6\n 9 Metro-North Commuter Railroad Company, dba: MTA Metro-… Comm…            94.4\n10 MTA New York City Transit                               Heav…            91.5\n# ℹ 136 more rows\n\n\nThe transit system with the highest total fares per vehicle revenue miles is Washington State Ferries, with a ratio of 1120 total fares to one vehicle revenue mile. An interesting correlation to the last inquiry is that the top three highest total fares per VRM belong to ferryboats. Furthermore, the highest value on the list is almost 500% greater than the third value, which is 188, and that percentage only grows as that list goes further down."
  },
  {
    "objectID": "mp01.html#conclusion",
    "href": "mp01.html#conclusion",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "In regard to what transit system in the country is the most effective, it depends on which data points you use to weigh your opinion. If you are considering which system has the highest values in URM and UPT, meaning it is the most frequently used, the answer would be the major transit system of NYC’s MTA Transit. Not only is its heavy rail system extremely prevalent in these numbers, which makes sense since numerous rails span the lengths of New York City and are used daily by many, but the NYC MTA Bus also holds rank compared to others.\nHowever, if you are considering which transit system is the most cost effective, it would have to be the Anaheim Transportation Network. Since a high farebox recovery ratio indicates that a transit system is profitable, Anaheim Transportation Network bus’ numbers alone show that this system is highly more profitable than the rest. This agency also leads margin of lowest expenses per unlinked passenger trip, which shows that not only is this system great at making money, it also great at retaining it and not spending the majority of it on expenses. However, while this is great from a business standpoint, as a passenger this transportation agency ranks high on the total fares per vehicle revenue mile scale, as it is in 4th place. This means that this transportation is fairly expensive to ride compared to the others.\nIn my opinion, I believe that the MTA New York City Transit is the most effective in the country, due to the enormous scale it can run on at a moderate price compared to other agencies."
  },
  {
    "objectID": "mp01.html#introduction-farebox-recovery",
    "href": "mp01.html#introduction-farebox-recovery",
    "title": "Mini Project 01: Fiscal Characterisitics of Major US Public Transit Systems",
    "section": "",
    "text": "This project was taken as inspiration from a YouTuber City Nerd, who created a video about the “10 Transit Services That Do Huge Numbers at the Farebox”. Farebox Recovery is the fraction of revenues raised from fares instead of taxes.\nFor this project, we will use data from the [National Transit Database] as our primary source. The following tables/reports will be used:\n\nThe 2022 Fare Revenue table, in which we will mostly explore revenue.\nThe lastest Monthly Ridership tables, in which we will mostly explore the Unlinked Passenger Trips (UPT) and Vehicle Revenue Miles (VRM).\nThe 2022 Operating Expenses reports, in which we will mostly explore expenses.\n\nWe will use the 2022 verson of all reports, as up-to-date data and newer reports are often uploaded on a lag."
  },
  {
    "objectID": "mp02.html",
    "href": "mp02.html",
    "title": "Mini Project 02: The Business of Show Business",
    "section": "",
    "text": "In this project, I will be utilizing data from the Internet Movie Database (IMDb) to discover what the next best movie is to produce. I will then analyize this data and create a pitch to win my boss over.\n\n\n\n\n\nClick to see how the data was downloaded\n\n\nlibrary(tidyverse)\nlibrary(dplyr)\n\n\nget_imdb_file &lt;- function(fname){\n    BASE_URL &lt;- \"https://datasets.imdbws.com/\"\n    fname_ext &lt;- paste0(fname, \".tsv.gz\")\n    if(!file.exists(fname_ext)){\n        FILE_URL &lt;- paste0(BASE_URL, fname_ext)\n        download.file(FILE_URL, \n                      destfile = fname_ext)\n    }\n    as.data.frame(readr::read_tsv(fname_ext, lazy=FALSE))\n}\n\nNAME_BASICS      &lt;- get_imdb_file(\"name.basics\") \n\nRows: 8040136 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (6): nconst, primaryName, birthYear, deathYear, primaryProfession, known...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_BASICS     &lt;- get_imdb_file(\"title.basics\") \n\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat &lt;- vroom(...)\n  problems(dat)\n\n\nRows: 2195495 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (8): tconst, titleType, primaryTitle, originalTitle, startYear, endYear,...\ndbl (1): isAdult\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_EPISODES   &lt;- get_imdb_file(\"title.episode\") \n\nRows: 8523292 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (4): tconst, parentTconst, seasonNumber, episodeNumber\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_RATINGS    &lt;- get_imdb_file(\"title.ratings\") \n\nRows: 589116 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (1): tconst\ndbl (2): averageRating, numVotes\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_CREW       &lt;- get_imdb_file(\"title.crew\") \n\nRows: 10474911 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (3): tconst, directors, writers\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_PRINCIPALS &lt;- get_imdb_file(\"title.principals\")\n\nRows: 14552749 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (5): tconst, nconst, category, job, characters\ndbl (1): ordering\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nNAME_BASICS &lt;- NAME_BASICS |&gt; \n    filter(str_count(knownForTitles, \",\") &gt; 1)\n\n\nBefore we fully dive in, let’s see how many obscure movies are in this dataset.\n\nTITLE_RATINGS |&gt;\n    ggplot(aes(x=numVotes)) + \n    geom_histogram(bins=30) +\n    xlab(\"Number of IMDB Ratings\") + \n    ylab(\"Number of Titles\") + \n    ggtitle(\"Majority of IMDB Titles Have Less than 100 Ratings\") + \n    theme_bw() + \n    scale_x_log10(label=scales::comma) + \n    scale_y_continuous(label=scales::comma)\n\n\n\n\n\n\n\n\n\nTITLE_RATINGS |&gt;\n    pull(numVotes) |&gt;\n    quantile()\n\n     0%     25%     50%     75%    100% \n      5      15      37     138 2945417 \n\n\n\nTITLE_RATINGS &lt;- TITLE_RATINGS |&gt;\n    filter(numVotes &gt;= 100)\n\n\nTITLE_BASICS &lt;- TITLE_BASICS |&gt;\n    semi_join(TITLE_RATINGS, \n              join_by(tconst == tconst))\n\nTITLE_CREW &lt;- TITLE_CREW |&gt;\n    semi_join(TITLE_RATINGS, \n              join_by(tconst == tconst))\n\nTITLE_EPISODES_1 &lt;- TITLE_EPISODES |&gt;\n    semi_join(TITLE_RATINGS, \n              join_by(tconst == tconst))\nTITLE_EPISODES_2 &lt;- TITLE_EPISODES |&gt;\n    semi_join(TITLE_RATINGS, \n              join_by(parentTconst == tconst))\n\nTITLE_EPISODES &lt;- bind_rows(TITLE_EPISODES_1,\n                            TITLE_EPISODES_2) |&gt;\n    distinct()\n\nTITLE_PRINCIPALS &lt;- TITLE_PRINCIPALS |&gt;\n    semi_join(TITLE_RATINGS, join_by(tconst == tconst))\n\n\nrm(TITLE_EPISODES_1)\nrm(TITLE_EPISODES_2)\n\n\nNAME_BASICS &lt;- NAME_BASICS |&gt;\n    mutate(birthYear = as.numeric(birthYear),\n           deathYear = as.numeric(deathYear))\n\nWarning: There were 2 warnings in `mutate()`.\nThe first warning was:\nℹ In argument: `birthYear = as.numeric(birthYear)`.\nCaused by warning:\n! NAs introduced by coercion\nℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.\n\n\n##Task 1: Column Type Correction\n\nTITLE_BASICS &lt;- TITLE_BASICS |&gt;\n  mutate(isAdult = as.logical(isAdult),\n         startYear = as.numeric(startYear),\n         endYear = as.numeric(endYear),\n         runtimeMinutes = as.numeric(runtimeMinutes))\n\nWarning: There were 3 warnings in `mutate()`.\nThe first warning was:\nℹ In argument: `startYear = as.numeric(startYear)`.\nCaused by warning:\n! NAs introduced by coercion\nℹ Run `dplyr::last_dplyr_warnings()` to see the 2 remaining warnings.\n\nTITLE_EPISODES &lt;- TITLE_EPISODES |&gt;\n  mutate(seasonNumber = as.numeric(seasonNumber),\n         episodeNumber = as.numeric(episodeNumber))\n\nWarning: There were 2 warnings in `mutate()`.\nThe first warning was:\nℹ In argument: `seasonNumber = as.numeric(seasonNumber)`.\nCaused by warning:\n! NAs introduced by coercion\nℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.\n\n\n\nNAME_BASICS |&gt; separate_longer_delim(knownForTitles, \",\") |&gt; slice_head(n=10) \n\n      nconst     primaryName birthYear deathYear\n1  nm0000001    Fred Astaire      1899      1987\n2  nm0000001    Fred Astaire      1899      1987\n3  nm0000001    Fred Astaire      1899      1987\n4  nm0000001    Fred Astaire      1899      1987\n5  nm0000002   Lauren Bacall      1924      2014\n6  nm0000002   Lauren Bacall      1924      2014\n7  nm0000002   Lauren Bacall      1924      2014\n8  nm0000002   Lauren Bacall      1924      2014\n9  nm0000003 Brigitte Bardot      1934        NA\n10 nm0000003 Brigitte Bardot      1934        NA\n                    primaryProfession knownForTitles\n1        actor,miscellaneous,producer      tt0072308\n2        actor,miscellaneous,producer      tt0050419\n3        actor,miscellaneous,producer      tt0053137\n4        actor,miscellaneous,producer      tt0027125\n5  actress,soundtrack,archive_footage      tt0037382\n6  actress,soundtrack,archive_footage      tt0075213\n7  actress,soundtrack,archive_footage      tt0117057\n8  actress,soundtrack,archive_footage      tt0038355\n9   actress,music_department,producer      tt0057345\n10  actress,music_department,producer      tt0049189\n\n\n#Task 2\n\n\n\n\nNumber_of_Movies &lt;- TITLE_BASICS |&gt;\n  filter(titleType == \"movie\") |&gt;\n  summarize(Number = n())\n\nprint(Number_of_Movies$Number)\n\n[1] 74051\n\n\n\nNumber_of_TVshows &lt;- TITLE_BASICS |&gt;\n  filter(titleType == \"tvSeries\") |&gt;\n  summarize(Number = n())\n\nprint(Number_of_TVshows$Number)\n\n[1] 11545\n\n\n\nNumber_of_Episodes &lt;- TITLE_EPISODES |&gt;\n  summarize(Number = n())\n\nprint(Number_of_Episodes$Number)\n\n[1] 1832877\n\n\n\n\n\n\noldest_person &lt;- NAME_BASICS |&gt;\n  filter(is.na(deathYear)) |&gt;\n  arrange(birthYear) |&gt;\n  slice(1)\n\nprint(oldest_person)\n\n     nconst    primaryName birthYear deathYear primaryProfession\n1 nm1441282 Richard Dybeck      1811        NA        soundtrack\n                           knownForTitles\n1 tt0021783,tt0022126,tt0036372,tt0037562\n\n\nUnless our oldest actor is 4000 years old, we need to restrict the data set. Oldest living person is 116.\n\noldest_person &lt;- NAME_BASICS |&gt;\n  filter(is.na(deathYear),\n         birthYear &gt;= 1924) |&gt;\n  arrange(birthYear) |&gt;\n  slice(1)\n\nprint(oldest_person)\n\n     nconst     primaryName birthYear deathYear           primaryProfession\n1 nm0001693 Eva Marie Saint      1924        NA actress,producer,soundtrack\n                           knownForTitles\n1 tt0047296,tt0053125,tt0348150,tt1837709\n\n\nOldest is Eva Marie Saint.\n\nThere is one TV Episode in this data set with a perfect 10/10 rating and at least 200,000 IMDb ratings. What is it? What series does it belong to?\n\n\nBest_Episode &lt;- TITLE_RATINGS |&gt; \n  filter(averageRating == 10,\n         numVotes &gt;= 200000)\n\nprint(Best_Episode)\n\n[1] tconst        averageRating numVotes     \n&lt;0 rows&gt; (or 0-length row.names)\n\n\n\nBest_Episode_Name &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt2301451\")\n\nprint(Best_Episode_Name)\n\n[1] tconst         titleType      primaryTitle   originalTitle  isAdult       \n[6] startYear      endYear        runtimeMinutes genres        \n&lt;0 rows&gt; (or 0-length row.names)\n\n\nOzymandias Breaking Bad.\nWhat four projects is the actor Mark Hamill most known for?\n\nMark_Hamill &lt;- NAME_BASICS |&gt;\n  filter(primaryName == \"Mark Hamill\")\n\nprint(Mark_Hamill)\n\n     nconst primaryName birthYear deathYear       primaryProfession\n1 nm0000434 Mark Hamill        NA        NA actor,producer,director\n                           knownForTitles\n1 tt0076759,tt2527336,tt0080684,tt0086190\n\nMark_Hamill_Projects &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt0076759\") \n\nprint(Mark_Hamill_Projects)\n\n     tconst titleType                       primaryTitle originalTitle isAdult\n1 tt0076759     movie Star Wars: Episode IV - A New Hope     Star Wars   FALSE\n  startYear endYear runtimeMinutes                   genres\n1      1977      NA            121 Action,Adventure,Fantasy\n\nMark_Hamill_Projects &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt2527336\") \n\nprint(Mark_Hamill_Projects)\n\n[1] tconst         titleType      primaryTitle   originalTitle  isAdult       \n[6] startYear      endYear        runtimeMinutes genres        \n&lt;0 rows&gt; (or 0-length row.names)\n\nMark_Hamill_Projects &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt0086190\") \n\nprint(Mark_Hamill_Projects)\n\n     tconst titleType                               primaryTitle\n1 tt0086190     movie Star Wars: Episode VI - Return of the Jedi\n                               originalTitle isAdult startYear endYear\n1 Star Wars: Episode VI - Return of the Jedi   FALSE      1983      NA\n  runtimeMinutes                   genres\n1            131 Action,Adventure,Fantasy\n\nMark_Hamill_Projects &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt0080684\") \n\nprint(Mark_Hamill_Projects)\n\n     tconst titleType                                   primaryTitle\n1 tt0080684     movie Star Wars: Episode V - The Empire Strikes Back\n                                   originalTitle isAdult startYear endYear\n1 Star Wars: Episode V - The Empire Strikes Back   FALSE      1980      NA\n  runtimeMinutes                   genres\n1            124 Action,Adventure,Fantasy\n\n\nWhat TV series, with more than 12 episodes, has the highest average rating?\n\ntwelve_episodes &lt;- TITLE_EPISODES |&gt; \n  filter(episodeNumber &gt; 12)  \n\nTVseries12 &lt;- inner_join(twelve_episodes, TITLE_RATINGS, join_by(tconst))\n\nseriesaverage &lt;- TVseries12 |&gt;\n  group_by(parentTconst) |&gt;\n  summarize(average_score = mean(averageRating, na.rm = TRUE)) |&gt;\n  arrange(desc(average_score))\n\nprint(seriesaverage)\n\n# A tibble: 1,024 × 2\n   parentTconst average_score\n   &lt;chr&gt;                &lt;dbl&gt;\n 1 tt0170980              9.9\n 2 tt0491739              9.9\n 3 tt1134887              9.8\n 4 tt3032476              9.8\n 5 tt4158110              9.8\n 6 tt0043192              9.7\n 7 tt0061296              9.7\n 8 tt0155428              9.7\n 9 tt0840891              9.7\n10 tt0870039              9.7\n# ℹ 1,014 more rows\n\n\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt0409579\") \n\n     tconst titleType primaryTitle originalTitle isAdult startYear endYear\n1 tt0409579  tvSeries         Made          Made   FALSE      2003      NA\n  runtimeMinutes     genres\n1             60 Reality-TV\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt0491739\")\n\n     tconst titleType        primaryTitle originalTitle isAdult startYear\n1 tt0491739  tvSeries In the Nick of Time    Sto para 5   FALSE      2005\n  endYear runtimeMinutes               genres\n1    2007             45 Comedy,Drama,Mystery\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt11289784\") \n\n      tconst titleType primaryTitle originalTitle isAdult startYear endYear\n1 tt11289784  tvSeries   Unus Annus    Unus Annus   FALSE      2019    2020\n  runtimeMinutes            genres\n1             NA Comedy,Reality-TV\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt11363282\") \n\n      tconst titleType                          primaryTitle\n1 tt11363282  tvSeries The Real Housewives of Salt Lake City\n                          originalTitle isAdult startYear endYear\n1 The Real Housewives of Salt Lake City   FALSE      2020      NA\n  runtimeMinutes     genres\n1             43 Reality-TV\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt21278628\") \n\n[1] tconst         titleType      primaryTitle   originalTitle  isAdult       \n[6] startYear      endYear        runtimeMinutes genres        \n&lt;0 rows&gt; (or 0-length row.names)\n\n\n\nThe TV series Happy Days (1974-1984) gives us the common idiom “jump the shark”. The phrase comes from a controversial fifth season episode (aired in 1977) in which a lead character literally jumped over a shark on water skis. Idiomatically, it is used to refer to the moment when a once-great show becomes ridiculous and rapidly looses quality.\n\nIs it true that episodes from later seasons of Happy Days have lower average ratings than the early seasons?\n\nTITLE_BASICS |&gt;\n  filter(primaryTitle == \"Happy Days\",\n         startYear == \"1974\",\n         endYear == \"1984\") \n\n     tconst titleType primaryTitle originalTitle isAdult startYear endYear\n1 tt0070992  tvSeries   Happy Days    Happy Days   FALSE      1974    1984\n  runtimeMinutes              genres\n1             30 Comedy,Family,Music\n\n\n\nHappy_Days &lt;- TITLE_EPISODES |&gt;\n  filter(parentTconst == \"tt0070992\")\n\nHappy_Days_Scores &lt;- inner_join(Happy_Days, TITLE_RATINGS, join_by(tconst))\n\n\nHappy_Days_Seasons &lt;- Happy_Days_Scores |&gt;\n  group_by(seasonNumber) |&gt;\n  summarize(averagescore = mean(averageRating, na.rm = TRUE)) |&gt;\n  arrange(seasonNumber)\n\nprint(Happy_Days_Seasons)\n\n# A tibble: 11 × 2\n   seasonNumber averagescore\n          &lt;dbl&gt;        &lt;dbl&gt;\n 1            1         7.58\n 2            2         7.69\n 3            3         7.7 \n 4            4         7.43\n 5            5         7   \n 6            6         7.02\n 7            7         6.33\n 8            8         5.4 \n 9            9         6.4 \n10           10         6.7 \n11           11         7.33\n\n\n#Task 3\n\nTITLE_RATINGS &lt;- TITLE_RATINGS |&gt;\n  mutate(popularity = averageRating*numVotes) \n\nmovie_ratings &lt;- inner_join(TITLE_BASICS, TITLE_RATINGS, join_by(tconst))\n\nmovie_ratings &lt;- movie_ratings |&gt; select(tconst, titleType, primaryTitle, genres, startYear, averageRating, numVotes, popularity)\n\nmovie_ratings &lt;- movie_ratings |&gt; \n  filter(titleType == \"movie\") |&gt;\n  arrange(desc(popularity))\n\n\nTop_ten &lt;- movie_ratings |&gt;\n  slice(1:10)\n\nprint(Top_ten)\n\n      tconst titleType                                      primaryTitle\n1  tt0111161     movie                          The Shawshank Redemption\n2  tt0468569     movie                                   The Dark Knight\n3  tt0137523     movie                                        Fight Club\n4  tt0109830     movie                                      Forrest Gump\n5  tt0110912     movie                                      Pulp Fiction\n6  tt0068646     movie                                     The Godfather\n7  tt0816692     movie                                      Interstellar\n8  tt0120737     movie The Lord of the Rings: The Fellowship of the Ring\n9  tt0133093     movie                                        The Matrix\n10 tt0167260     movie     The Lord of the Rings: The Return of the King\n                   genres startYear averageRating numVotes popularity\n1                   Drama      1994           9.3  2945417   27392378\n2      Action,Crime,Drama      2008           9.0  2925552   26329968\n3                   Drama      1999           8.8  2377517   20922150\n4           Drama,Romance      1994           8.8  2303729   20272815\n5             Crime,Drama      1994           8.9  2261906   20130963\n6             Crime,Drama      1972           9.2  2053013   18887720\n7  Adventure,Drama,Sci-Fi      2014           8.7  2165108   18836440\n8  Action,Adventure,Drama      2001           8.9  2045311   18203268\n9           Action,Sci-Fi      1999           8.7  2091447   18195589\n10 Action,Adventure,Drama      2003           9.0  2015928   18143352\n\n\n\nmovie_ratings &lt;- movie_ratings |&gt; \n  filter(titleType == \"movie\") |&gt;\n  arrange(popularity)\n\n\nbottom_five &lt;- movie_ratings |&gt;\n  slice(1:5)\n\nprint(bottom_five)\n\n     tconst titleType               primaryTitle         genres startYear\n1 tt0498734     movie   Zwischen Glück und Krone    Documentary      1959\n2 tt0386134     movie          Yubiley prokurora         Comedy      2003\n3 tt0309422     movie The Case He Couldn't Crack Crime,Thriller      1981\n4 tt0960709     movie              18'ler Takimi   Comedy,Crime      2007\n5 tt1047512     movie            Parentesi tonde         Comedy      2006\n  averageRating numVotes popularity\n1           1.2      103      123.6\n2           1.1      128      140.8\n3           1.0      153      153.0\n4           1.3      126      163.8\n5           1.1      161      177.1\n\n\n\nLeo &lt;- NAME_BASICS |&gt;\n  filter(primaryName == \"Leonardo DiCaprio\") |&gt;\n  separate_longer_delim(knownForTitles, \",\")\n\n\ncolnames(Leo)[colnames(Leo) == \"knownForTitles\"] &lt;- \"tconst\"\n\nLeo &lt;- inner_join(Leo, movie_ratings, join_by(tconst))\n\n\nHanks &lt;- NAME_BASICS |&gt;\n  filter(primaryName == \"Tom Hanks\") |&gt;\n  separate_longer_delim(knownForTitles, \",\")\n\n\ncolnames(Hanks)[colnames(Hanks) == \"knownForTitles\"] &lt;- \"tconst\"\n\nHanks &lt;- inner_join(Hanks, movie_ratings, join_by(tconst))\n\n\nHighest_Grossing &lt;- data.frame(\n  tconst = c(\"tt0499549\", \"tt4154796\", \"tt1630029\", \"tt0120338\", \"tt2488496\"),\n  LifetimeGross = c(\"$2,923,706,026\", \"$2,799,439,100\", \"$2,320,250,281\", \"$2,264,750,694\", \"$2,071,310,218\")\n)\n\n\nHigh_Grossing &lt;- inner_join(movie_ratings, Highest_Grossing, join_by(tconst))\n\n\nsolid_or_better &lt;- movie_ratings |&gt;\n  filter(popularity &gt;= 5000000)\n\n#Task 4\n\nsolid_or_better &lt;- solid_or_better|&gt;\n  arrange(startYear)\n\n\nsolid_or_better &lt;- solid_or_better |&gt; separate_longer_delim(genres, \",\") \n\n\ndecades_total &lt;- solid_or_better |&gt;\n  count(genres) \n\n\nforties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1940 & startYear &lt;= 1949) |&gt;\n  count(genres) \n\nfifties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1950 & startYear &lt;= 1959) |&gt;\n  count(genres) \n\n\nsixties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1960 & startYear &lt;= 1969) |&gt;\n  count(genres) \n\n\nseventies &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1970 & startYear &lt;= 1979) |&gt;\n  count(genres) \n\n\n\neighties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1980 & startYear &lt;= 1989) |&gt;\n  count(genres) \n\nnineties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1990 & startYear &lt;= 1999) |&gt;\n  count(genres) \n\n\nthousands &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 2000 & startYear &lt;= 2009) |&gt;\n  count(genres) \n\n\ntens &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 2010 & startYear &lt;= 2019) |&gt;\n  count(genres) \n\ntwenties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 2020 & startYear &lt;= 2029) |&gt;\n  count(genres) \n\n40s - drama (1) 50s - Crime (1) 60s - adventure (2) 70s - Drama (7) 80s - Action (8) 90s - Drama (25) 00s - Adventure (30) 10s - Action (42) 20s - Action (4)\n\ncolnames(forties)[colnames(forties) == \"n\"] &lt;- \"40s\"\ncolnames(fifties)[colnames(fifties) == \"n\"] &lt;- \"50s\"\ncolnames(sixties)[colnames(sixties) == \"n\"] &lt;- \"60s\"\ncolnames(seventies)[colnames(seventies) == \"n\"] &lt;- \"70s\"\ncolnames(eighties)[colnames(eighties) == \"n\"] &lt;- \"80s\"\ncolnames(nineties)[colnames(nineties) == \"n\"] &lt;- \"90s\"\ncolnames(thousands)[colnames(thousands) == \"n\"] &lt;- \"00s\"\ncolnames(tens)[colnames(tens) == \"n\"] &lt;- \"10s\"\ncolnames(twenties)[colnames(twenties) == \"n\"] &lt;- \"20s\"\ncolnames(decades_total)[colnames(decades_total) == \"n\"] &lt;- \"total\"\n\ndecades &lt;- full_join(forties, fifties, join_by(genres))\ndecades &lt;- full_join(decades, sixties, join_by(genres))\ndecades &lt;- full_join(decades, seventies, join_by(genres))\ndecades &lt;- full_join(decades, eighties, join_by(genres))\ndecades &lt;- full_join(decades, nineties, join_by(genres))\ndecades &lt;- full_join(decades, thousands, join_by(genres))\ndecades &lt;- full_join(decades, tens, join_by(genres))\ndecades &lt;- full_join(decades, twenties, join_by(genres))\ndecades &lt;- full_join(decades, decades_total, join_by(genres))\n\nBelow is a table that shows all of the genres throughout the years.\n\nlibrary(DT)\ndatatable(decades) \n\n\n\n\n\nLooking at the chart, it is clear to see that the genre with the most consistent successes each decade is Drama, as it is the only genre that had a least one success every decade from the forties until now. The genre that used to reliably produce successes, but has fallen out of favor is ???? COME BACK TO THIS\nThe genre that has produced the most successes since 2010 is the Adventure drama with 15 successes.\n\ndecade2010_pop &lt;- movie_ratings |&gt;\n  filter(startYear &gt;= 2010 & startYear &lt;= 2019) |&gt;\n  separate_longer_delim(genres, \",\") |&gt; \n  group_by(genres) |&gt;\n  summarize(totalPopularity = sum(popularity)) |&gt;\n  arrange(desc(totalPopularity)) |&gt;\n  slice(1:3)\n\nprint(decade2010_pop)\n\n# A tibble: 3 × 2\n  genres    totalPopularity\n  &lt;chr&gt;               &lt;dbl&gt;\n1 Adventure      198759518.\n2 Drama          195157332.\n3 Action         194724207.\n\n\n\ndecade2010_amount &lt;- movie_ratings |&gt;\n  filter(startYear &gt;= 2010 & startYear &lt;= 2019) |&gt;\n  separate_longer_delim(genres, \",\") |&gt; \n  count(genres) |&gt;\n  arrange(desc(n)) |&gt;\n  slice(1:9) \n  \n\nprint(decade2010_amount)\n\n       genres    n\n1       Drama 1089\n2      Comedy  619\n3 Documentary  364\n4      Action  351\n5    Thriller  288\n6     Romance  263\n7      Horror  247\n8       Crime  240\n9   Adventure  217\n\n\nIt ranked high on the total popularity, but in the middle on the amount of productions.\nLooking again at the chart from earlier, we can see that the genre that became popular most frequently is the Action genre. It had its first successful movie in the 70s, eight the following year, to its max of 25 in the 2000s.\nBased on my findings, I decided to choose an Action genre, as while it is the fifth most produced in the last decade, it had the second highest popularity score, being one of two of the only genres to reach a success score of over a billion. The first was the drama genre, but it also leads the category with about 7,500 more movies than second place, and almost 13500 more than the action category. This shows me that they only have this high of a popularity due to the numerous successes that they had, which means each success had to average at the lower end of the success scale. On the other hand, with the action genre having less movies, but the second highest score, this shows me that each movie had to average at a high score on the success spectrum in order to secure this spot."
  },
  {
    "objectID": "mp02.html#introduction",
    "href": "mp02.html#introduction",
    "title": "Mini Project 02: The Business of Show Business",
    "section": "",
    "text": "In this project, I will be utilizing data from the Internet Movie Database (IMDb) to discover what the next best movie is to produce. I will then analyize this data and create a pitch to win my boss over."
  },
  {
    "objectID": "mp02.html#diving-into-the-data",
    "href": "mp02.html#diving-into-the-data",
    "title": "Mini Project 02: The Business of Show Business",
    "section": "",
    "text": "Click to see how the data was downloaded\n\n\nlibrary(tidyverse)\nlibrary(dplyr)\n\n\nget_imdb_file &lt;- function(fname){\n    BASE_URL &lt;- \"https://datasets.imdbws.com/\"\n    fname_ext &lt;- paste0(fname, \".tsv.gz\")\n    if(!file.exists(fname_ext)){\n        FILE_URL &lt;- paste0(BASE_URL, fname_ext)\n        download.file(FILE_URL, \n                      destfile = fname_ext)\n    }\n    as.data.frame(readr::read_tsv(fname_ext, lazy=FALSE))\n}\n\nNAME_BASICS      &lt;- get_imdb_file(\"name.basics\") \n\nRows: 8040136 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (6): nconst, primaryName, birthYear, deathYear, primaryProfession, known...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_BASICS     &lt;- get_imdb_file(\"title.basics\") \n\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat &lt;- vroom(...)\n  problems(dat)\n\n\nRows: 2195495 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (8): tconst, titleType, primaryTitle, originalTitle, startYear, endYear,...\ndbl (1): isAdult\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_EPISODES   &lt;- get_imdb_file(\"title.episode\") \n\nRows: 8523292 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (4): tconst, parentTconst, seasonNumber, episodeNumber\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_RATINGS    &lt;- get_imdb_file(\"title.ratings\") \n\nRows: 589116 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (1): tconst\ndbl (2): averageRating, numVotes\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_CREW       &lt;- get_imdb_file(\"title.crew\") \n\nRows: 10474911 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (3): tconst, directors, writers\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nTITLE_PRINCIPALS &lt;- get_imdb_file(\"title.principals\")\n\nRows: 14552749 Columns: 6\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \"\\t\"\nchr (5): tconst, nconst, category, job, characters\ndbl (1): ordering\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#| cache: true\n\n\nNAME_BASICS &lt;- NAME_BASICS |&gt; \n    filter(str_count(knownForTitles, \",\") &gt; 1)\n\n\nBefore we fully dive in, let’s see how many obscure movies are in this dataset.\n\nTITLE_RATINGS |&gt;\n    ggplot(aes(x=numVotes)) + \n    geom_histogram(bins=30) +\n    xlab(\"Number of IMDB Ratings\") + \n    ylab(\"Number of Titles\") + \n    ggtitle(\"Majority of IMDB Titles Have Less than 100 Ratings\") + \n    theme_bw() + \n    scale_x_log10(label=scales::comma) + \n    scale_y_continuous(label=scales::comma)\n\n\n\n\n\n\n\n\n\nTITLE_RATINGS |&gt;\n    pull(numVotes) |&gt;\n    quantile()\n\n     0%     25%     50%     75%    100% \n      5      15      37     138 2945417 \n\n\n\nTITLE_RATINGS &lt;- TITLE_RATINGS |&gt;\n    filter(numVotes &gt;= 100)\n\n\nTITLE_BASICS &lt;- TITLE_BASICS |&gt;\n    semi_join(TITLE_RATINGS, \n              join_by(tconst == tconst))\n\nTITLE_CREW &lt;- TITLE_CREW |&gt;\n    semi_join(TITLE_RATINGS, \n              join_by(tconst == tconst))\n\nTITLE_EPISODES_1 &lt;- TITLE_EPISODES |&gt;\n    semi_join(TITLE_RATINGS, \n              join_by(tconst == tconst))\nTITLE_EPISODES_2 &lt;- TITLE_EPISODES |&gt;\n    semi_join(TITLE_RATINGS, \n              join_by(parentTconst == tconst))\n\nTITLE_EPISODES &lt;- bind_rows(TITLE_EPISODES_1,\n                            TITLE_EPISODES_2) |&gt;\n    distinct()\n\nTITLE_PRINCIPALS &lt;- TITLE_PRINCIPALS |&gt;\n    semi_join(TITLE_RATINGS, join_by(tconst == tconst))\n\n\nrm(TITLE_EPISODES_1)\nrm(TITLE_EPISODES_2)\n\n\nNAME_BASICS &lt;- NAME_BASICS |&gt;\n    mutate(birthYear = as.numeric(birthYear),\n           deathYear = as.numeric(deathYear))\n\nWarning: There were 2 warnings in `mutate()`.\nThe first warning was:\nℹ In argument: `birthYear = as.numeric(birthYear)`.\nCaused by warning:\n! NAs introduced by coercion\nℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.\n\n\n##Task 1: Column Type Correction\n\nTITLE_BASICS &lt;- TITLE_BASICS |&gt;\n  mutate(isAdult = as.logical(isAdult),\n         startYear = as.numeric(startYear),\n         endYear = as.numeric(endYear),\n         runtimeMinutes = as.numeric(runtimeMinutes))\n\nWarning: There were 3 warnings in `mutate()`.\nThe first warning was:\nℹ In argument: `startYear = as.numeric(startYear)`.\nCaused by warning:\n! NAs introduced by coercion\nℹ Run `dplyr::last_dplyr_warnings()` to see the 2 remaining warnings.\n\nTITLE_EPISODES &lt;- TITLE_EPISODES |&gt;\n  mutate(seasonNumber = as.numeric(seasonNumber),\n         episodeNumber = as.numeric(episodeNumber))\n\nWarning: There were 2 warnings in `mutate()`.\nThe first warning was:\nℹ In argument: `seasonNumber = as.numeric(seasonNumber)`.\nCaused by warning:\n! NAs introduced by coercion\nℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.\n\n\n\nNAME_BASICS |&gt; separate_longer_delim(knownForTitles, \",\") |&gt; slice_head(n=10) \n\n      nconst     primaryName birthYear deathYear\n1  nm0000001    Fred Astaire      1899      1987\n2  nm0000001    Fred Astaire      1899      1987\n3  nm0000001    Fred Astaire      1899      1987\n4  nm0000001    Fred Astaire      1899      1987\n5  nm0000002   Lauren Bacall      1924      2014\n6  nm0000002   Lauren Bacall      1924      2014\n7  nm0000002   Lauren Bacall      1924      2014\n8  nm0000002   Lauren Bacall      1924      2014\n9  nm0000003 Brigitte Bardot      1934        NA\n10 nm0000003 Brigitte Bardot      1934        NA\n                    primaryProfession knownForTitles\n1        actor,miscellaneous,producer      tt0072308\n2        actor,miscellaneous,producer      tt0050419\n3        actor,miscellaneous,producer      tt0053137\n4        actor,miscellaneous,producer      tt0027125\n5  actress,soundtrack,archive_footage      tt0037382\n6  actress,soundtrack,archive_footage      tt0075213\n7  actress,soundtrack,archive_footage      tt0117057\n8  actress,soundtrack,archive_footage      tt0038355\n9   actress,music_department,producer      tt0057345\n10  actress,music_department,producer      tt0049189\n\n\n#Task 2"
  },
  {
    "objectID": "mp02.html#how-many-movies-are-in-our-data-set-how-many-tv-series-how-many-tv-episodes",
    "href": "mp02.html#how-many-movies-are-in-our-data-set-how-many-tv-series-how-many-tv-episodes",
    "title": "Mini Project 02: The Business of Show Business",
    "section": "",
    "text": "Number_of_Movies &lt;- TITLE_BASICS |&gt;\n  filter(titleType == \"movie\") |&gt;\n  summarize(Number = n())\n\nprint(Number_of_Movies$Number)\n\n[1] 74051\n\n\n\nNumber_of_TVshows &lt;- TITLE_BASICS |&gt;\n  filter(titleType == \"tvSeries\") |&gt;\n  summarize(Number = n())\n\nprint(Number_of_TVshows$Number)\n\n[1] 11545\n\n\n\nNumber_of_Episodes &lt;- TITLE_EPISODES |&gt;\n  summarize(Number = n())\n\nprint(Number_of_Episodes$Number)\n\n[1] 1832877"
  },
  {
    "objectID": "mp02.html#who-is-the-oldest-living-person-in-our-data-set",
    "href": "mp02.html#who-is-the-oldest-living-person-in-our-data-set",
    "title": "Mini Project 02: The Business of Show Business",
    "section": "",
    "text": "oldest_person &lt;- NAME_BASICS |&gt;\n  filter(is.na(deathYear)) |&gt;\n  arrange(birthYear) |&gt;\n  slice(1)\n\nprint(oldest_person)\n\n     nconst    primaryName birthYear deathYear primaryProfession\n1 nm1441282 Richard Dybeck      1811        NA        soundtrack\n                           knownForTitles\n1 tt0021783,tt0022126,tt0036372,tt0037562\n\n\nUnless our oldest actor is 4000 years old, we need to restrict the data set. Oldest living person is 116.\n\noldest_person &lt;- NAME_BASICS |&gt;\n  filter(is.na(deathYear),\n         birthYear &gt;= 1924) |&gt;\n  arrange(birthYear) |&gt;\n  slice(1)\n\nprint(oldest_person)\n\n     nconst     primaryName birthYear deathYear           primaryProfession\n1 nm0001693 Eva Marie Saint      1924        NA actress,producer,soundtrack\n                           knownForTitles\n1 tt0047296,tt0053125,tt0348150,tt1837709\n\n\nOldest is Eva Marie Saint.\n\nThere is one TV Episode in this data set with a perfect 10/10 rating and at least 200,000 IMDb ratings. What is it? What series does it belong to?\n\n\nBest_Episode &lt;- TITLE_RATINGS |&gt; \n  filter(averageRating == 10,\n         numVotes &gt;= 200000)\n\nprint(Best_Episode)\n\n[1] tconst        averageRating numVotes     \n&lt;0 rows&gt; (or 0-length row.names)\n\n\n\nBest_Episode_Name &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt2301451\")\n\nprint(Best_Episode_Name)\n\n[1] tconst         titleType      primaryTitle   originalTitle  isAdult       \n[6] startYear      endYear        runtimeMinutes genres        \n&lt;0 rows&gt; (or 0-length row.names)\n\n\nOzymandias Breaking Bad.\nWhat four projects is the actor Mark Hamill most known for?\n\nMark_Hamill &lt;- NAME_BASICS |&gt;\n  filter(primaryName == \"Mark Hamill\")\n\nprint(Mark_Hamill)\n\n     nconst primaryName birthYear deathYear       primaryProfession\n1 nm0000434 Mark Hamill        NA        NA actor,producer,director\n                           knownForTitles\n1 tt0076759,tt2527336,tt0080684,tt0086190\n\nMark_Hamill_Projects &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt0076759\") \n\nprint(Mark_Hamill_Projects)\n\n     tconst titleType                       primaryTitle originalTitle isAdult\n1 tt0076759     movie Star Wars: Episode IV - A New Hope     Star Wars   FALSE\n  startYear endYear runtimeMinutes                   genres\n1      1977      NA            121 Action,Adventure,Fantasy\n\nMark_Hamill_Projects &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt2527336\") \n\nprint(Mark_Hamill_Projects)\n\n[1] tconst         titleType      primaryTitle   originalTitle  isAdult       \n[6] startYear      endYear        runtimeMinutes genres        \n&lt;0 rows&gt; (or 0-length row.names)\n\nMark_Hamill_Projects &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt0086190\") \n\nprint(Mark_Hamill_Projects)\n\n     tconst titleType                               primaryTitle\n1 tt0086190     movie Star Wars: Episode VI - Return of the Jedi\n                               originalTitle isAdult startYear endYear\n1 Star Wars: Episode VI - Return of the Jedi   FALSE      1983      NA\n  runtimeMinutes                   genres\n1            131 Action,Adventure,Fantasy\n\nMark_Hamill_Projects &lt;- TITLE_BASICS |&gt;\n  filter(tconst == \"tt0080684\") \n\nprint(Mark_Hamill_Projects)\n\n     tconst titleType                                   primaryTitle\n1 tt0080684     movie Star Wars: Episode V - The Empire Strikes Back\n                                   originalTitle isAdult startYear endYear\n1 Star Wars: Episode V - The Empire Strikes Back   FALSE      1980      NA\n  runtimeMinutes                   genres\n1            124 Action,Adventure,Fantasy\n\n\nWhat TV series, with more than 12 episodes, has the highest average rating?\n\ntwelve_episodes &lt;- TITLE_EPISODES |&gt; \n  filter(episodeNumber &gt; 12)  \n\nTVseries12 &lt;- inner_join(twelve_episodes, TITLE_RATINGS, join_by(tconst))\n\nseriesaverage &lt;- TVseries12 |&gt;\n  group_by(parentTconst) |&gt;\n  summarize(average_score = mean(averageRating, na.rm = TRUE)) |&gt;\n  arrange(desc(average_score))\n\nprint(seriesaverage)\n\n# A tibble: 1,024 × 2\n   parentTconst average_score\n   &lt;chr&gt;                &lt;dbl&gt;\n 1 tt0170980              9.9\n 2 tt0491739              9.9\n 3 tt1134887              9.8\n 4 tt3032476              9.8\n 5 tt4158110              9.8\n 6 tt0043192              9.7\n 7 tt0061296              9.7\n 8 tt0155428              9.7\n 9 tt0840891              9.7\n10 tt0870039              9.7\n# ℹ 1,014 more rows\n\n\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt0409579\") \n\n     tconst titleType primaryTitle originalTitle isAdult startYear endYear\n1 tt0409579  tvSeries         Made          Made   FALSE      2003      NA\n  runtimeMinutes     genres\n1             60 Reality-TV\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt0491739\")\n\n     tconst titleType        primaryTitle originalTitle isAdult startYear\n1 tt0491739  tvSeries In the Nick of Time    Sto para 5   FALSE      2005\n  endYear runtimeMinutes               genres\n1    2007             45 Comedy,Drama,Mystery\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt11289784\") \n\n      tconst titleType primaryTitle originalTitle isAdult startYear endYear\n1 tt11289784  tvSeries   Unus Annus    Unus Annus   FALSE      2019    2020\n  runtimeMinutes            genres\n1             NA Comedy,Reality-TV\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt11363282\") \n\n      tconst titleType                          primaryTitle\n1 tt11363282  tvSeries The Real Housewives of Salt Lake City\n                          originalTitle isAdult startYear endYear\n1 The Real Housewives of Salt Lake City   FALSE      2020      NA\n  runtimeMinutes     genres\n1             43 Reality-TV\n\nTITLE_BASICS |&gt;\n  filter(tconst == \"tt21278628\") \n\n[1] tconst         titleType      primaryTitle   originalTitle  isAdult       \n[6] startYear      endYear        runtimeMinutes genres        \n&lt;0 rows&gt; (or 0-length row.names)\n\n\n\nThe TV series Happy Days (1974-1984) gives us the common idiom “jump the shark”. The phrase comes from a controversial fifth season episode (aired in 1977) in which a lead character literally jumped over a shark on water skis. Idiomatically, it is used to refer to the moment when a once-great show becomes ridiculous and rapidly looses quality.\n\nIs it true that episodes from later seasons of Happy Days have lower average ratings than the early seasons?\n\nTITLE_BASICS |&gt;\n  filter(primaryTitle == \"Happy Days\",\n         startYear == \"1974\",\n         endYear == \"1984\") \n\n     tconst titleType primaryTitle originalTitle isAdult startYear endYear\n1 tt0070992  tvSeries   Happy Days    Happy Days   FALSE      1974    1984\n  runtimeMinutes              genres\n1             30 Comedy,Family,Music\n\n\n\nHappy_Days &lt;- TITLE_EPISODES |&gt;\n  filter(parentTconst == \"tt0070992\")\n\nHappy_Days_Scores &lt;- inner_join(Happy_Days, TITLE_RATINGS, join_by(tconst))\n\n\nHappy_Days_Seasons &lt;- Happy_Days_Scores |&gt;\n  group_by(seasonNumber) |&gt;\n  summarize(averagescore = mean(averageRating, na.rm = TRUE)) |&gt;\n  arrange(seasonNumber)\n\nprint(Happy_Days_Seasons)\n\n# A tibble: 11 × 2\n   seasonNumber averagescore\n          &lt;dbl&gt;        &lt;dbl&gt;\n 1            1         7.58\n 2            2         7.69\n 3            3         7.7 \n 4            4         7.43\n 5            5         7   \n 6            6         7.02\n 7            7         6.33\n 8            8         5.4 \n 9            9         6.4 \n10           10         6.7 \n11           11         7.33\n\n\n#Task 3\n\nTITLE_RATINGS &lt;- TITLE_RATINGS |&gt;\n  mutate(popularity = averageRating*numVotes) \n\nmovie_ratings &lt;- inner_join(TITLE_BASICS, TITLE_RATINGS, join_by(tconst))\n\nmovie_ratings &lt;- movie_ratings |&gt; select(tconst, titleType, primaryTitle, genres, startYear, averageRating, numVotes, popularity)\n\nmovie_ratings &lt;- movie_ratings |&gt; \n  filter(titleType == \"movie\") |&gt;\n  arrange(desc(popularity))\n\n\nTop_ten &lt;- movie_ratings |&gt;\n  slice(1:10)\n\nprint(Top_ten)\n\n      tconst titleType                                      primaryTitle\n1  tt0111161     movie                          The Shawshank Redemption\n2  tt0468569     movie                                   The Dark Knight\n3  tt0137523     movie                                        Fight Club\n4  tt0109830     movie                                      Forrest Gump\n5  tt0110912     movie                                      Pulp Fiction\n6  tt0068646     movie                                     The Godfather\n7  tt0816692     movie                                      Interstellar\n8  tt0120737     movie The Lord of the Rings: The Fellowship of the Ring\n9  tt0133093     movie                                        The Matrix\n10 tt0167260     movie     The Lord of the Rings: The Return of the King\n                   genres startYear averageRating numVotes popularity\n1                   Drama      1994           9.3  2945417   27392378\n2      Action,Crime,Drama      2008           9.0  2925552   26329968\n3                   Drama      1999           8.8  2377517   20922150\n4           Drama,Romance      1994           8.8  2303729   20272815\n5             Crime,Drama      1994           8.9  2261906   20130963\n6             Crime,Drama      1972           9.2  2053013   18887720\n7  Adventure,Drama,Sci-Fi      2014           8.7  2165108   18836440\n8  Action,Adventure,Drama      2001           8.9  2045311   18203268\n9           Action,Sci-Fi      1999           8.7  2091447   18195589\n10 Action,Adventure,Drama      2003           9.0  2015928   18143352\n\n\n\nmovie_ratings &lt;- movie_ratings |&gt; \n  filter(titleType == \"movie\") |&gt;\n  arrange(popularity)\n\n\nbottom_five &lt;- movie_ratings |&gt;\n  slice(1:5)\n\nprint(bottom_five)\n\n     tconst titleType               primaryTitle         genres startYear\n1 tt0498734     movie   Zwischen Glück und Krone    Documentary      1959\n2 tt0386134     movie          Yubiley prokurora         Comedy      2003\n3 tt0309422     movie The Case He Couldn't Crack Crime,Thriller      1981\n4 tt0960709     movie              18'ler Takimi   Comedy,Crime      2007\n5 tt1047512     movie            Parentesi tonde         Comedy      2006\n  averageRating numVotes popularity\n1           1.2      103      123.6\n2           1.1      128      140.8\n3           1.0      153      153.0\n4           1.3      126      163.8\n5           1.1      161      177.1\n\n\n\nLeo &lt;- NAME_BASICS |&gt;\n  filter(primaryName == \"Leonardo DiCaprio\") |&gt;\n  separate_longer_delim(knownForTitles, \",\")\n\n\ncolnames(Leo)[colnames(Leo) == \"knownForTitles\"] &lt;- \"tconst\"\n\nLeo &lt;- inner_join(Leo, movie_ratings, join_by(tconst))\n\n\nHanks &lt;- NAME_BASICS |&gt;\n  filter(primaryName == \"Tom Hanks\") |&gt;\n  separate_longer_delim(knownForTitles, \",\")\n\n\ncolnames(Hanks)[colnames(Hanks) == \"knownForTitles\"] &lt;- \"tconst\"\n\nHanks &lt;- inner_join(Hanks, movie_ratings, join_by(tconst))\n\n\nHighest_Grossing &lt;- data.frame(\n  tconst = c(\"tt0499549\", \"tt4154796\", \"tt1630029\", \"tt0120338\", \"tt2488496\"),\n  LifetimeGross = c(\"$2,923,706,026\", \"$2,799,439,100\", \"$2,320,250,281\", \"$2,264,750,694\", \"$2,071,310,218\")\n)\n\n\nHigh_Grossing &lt;- inner_join(movie_ratings, Highest_Grossing, join_by(tconst))\n\n\nsolid_or_better &lt;- movie_ratings |&gt;\n  filter(popularity &gt;= 5000000)\n\n#Task 4\n\nsolid_or_better &lt;- solid_or_better|&gt;\n  arrange(startYear)\n\n\nsolid_or_better &lt;- solid_or_better |&gt; separate_longer_delim(genres, \",\") \n\n\ndecades_total &lt;- solid_or_better |&gt;\n  count(genres) \n\n\nforties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1940 & startYear &lt;= 1949) |&gt;\n  count(genres) \n\nfifties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1950 & startYear &lt;= 1959) |&gt;\n  count(genres) \n\n\nsixties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1960 & startYear &lt;= 1969) |&gt;\n  count(genres) \n\n\nseventies &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1970 & startYear &lt;= 1979) |&gt;\n  count(genres) \n\n\n\neighties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1980 & startYear &lt;= 1989) |&gt;\n  count(genres) \n\nnineties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 1990 & startYear &lt;= 1999) |&gt;\n  count(genres) \n\n\nthousands &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 2000 & startYear &lt;= 2009) |&gt;\n  count(genres) \n\n\ntens &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 2010 & startYear &lt;= 2019) |&gt;\n  count(genres) \n\ntwenties &lt;- solid_or_better |&gt;\n  filter(startYear &gt;= 2020 & startYear &lt;= 2029) |&gt;\n  count(genres) \n\n40s - drama (1) 50s - Crime (1) 60s - adventure (2) 70s - Drama (7) 80s - Action (8) 90s - Drama (25) 00s - Adventure (30) 10s - Action (42) 20s - Action (4)\n\ncolnames(forties)[colnames(forties) == \"n\"] &lt;- \"40s\"\ncolnames(fifties)[colnames(fifties) == \"n\"] &lt;- \"50s\"\ncolnames(sixties)[colnames(sixties) == \"n\"] &lt;- \"60s\"\ncolnames(seventies)[colnames(seventies) == \"n\"] &lt;- \"70s\"\ncolnames(eighties)[colnames(eighties) == \"n\"] &lt;- \"80s\"\ncolnames(nineties)[colnames(nineties) == \"n\"] &lt;- \"90s\"\ncolnames(thousands)[colnames(thousands) == \"n\"] &lt;- \"00s\"\ncolnames(tens)[colnames(tens) == \"n\"] &lt;- \"10s\"\ncolnames(twenties)[colnames(twenties) == \"n\"] &lt;- \"20s\"\ncolnames(decades_total)[colnames(decades_total) == \"n\"] &lt;- \"total\"\n\ndecades &lt;- full_join(forties, fifties, join_by(genres))\ndecades &lt;- full_join(decades, sixties, join_by(genres))\ndecades &lt;- full_join(decades, seventies, join_by(genres))\ndecades &lt;- full_join(decades, eighties, join_by(genres))\ndecades &lt;- full_join(decades, nineties, join_by(genres))\ndecades &lt;- full_join(decades, thousands, join_by(genres))\ndecades &lt;- full_join(decades, tens, join_by(genres))\ndecades &lt;- full_join(decades, twenties, join_by(genres))\ndecades &lt;- full_join(decades, decades_total, join_by(genres))\n\nBelow is a table that shows all of the genres throughout the years.\n\nlibrary(DT)\ndatatable(decades) \n\n\n\n\n\nLooking at the chart, it is clear to see that the genre with the most consistent successes each decade is Drama, as it is the only genre that had a least one success every decade from the forties until now. The genre that used to reliably produce successes, but has fallen out of favor is ???? COME BACK TO THIS\nThe genre that has produced the most successes since 2010 is the Adventure drama with 15 successes.\n\ndecade2010_pop &lt;- movie_ratings |&gt;\n  filter(startYear &gt;= 2010 & startYear &lt;= 2019) |&gt;\n  separate_longer_delim(genres, \",\") |&gt; \n  group_by(genres) |&gt;\n  summarize(totalPopularity = sum(popularity)) |&gt;\n  arrange(desc(totalPopularity)) |&gt;\n  slice(1:3)\n\nprint(decade2010_pop)\n\n# A tibble: 3 × 2\n  genres    totalPopularity\n  &lt;chr&gt;               &lt;dbl&gt;\n1 Adventure      198759518.\n2 Drama          195157332.\n3 Action         194724207.\n\n\n\ndecade2010_amount &lt;- movie_ratings |&gt;\n  filter(startYear &gt;= 2010 & startYear &lt;= 2019) |&gt;\n  separate_longer_delim(genres, \",\") |&gt; \n  count(genres) |&gt;\n  arrange(desc(n)) |&gt;\n  slice(1:9) \n  \n\nprint(decade2010_amount)\n\n       genres    n\n1       Drama 1089\n2      Comedy  619\n3 Documentary  364\n4      Action  351\n5    Thriller  288\n6     Romance  263\n7      Horror  247\n8       Crime  240\n9   Adventure  217\n\n\nIt ranked high on the total popularity, but in the middle on the amount of productions.\nLooking again at the chart from earlier, we can see that the genre that became popular most frequently is the Action genre. It had its first successful movie in the 70s, eight the following year, to its max of 25 in the 2000s.\nBased on my findings, I decided to choose an Action genre, as while it is the fifth most produced in the last decade, it had the second highest popularity score, being one of two of the only genres to reach a success score of over a billion. The first was the drama genre, but it also leads the category with about 7,500 more movies than second place, and almost 13500 more than the action category. This shows me that they only have this high of a popularity due to the numerous successes that they had, which means each success had to average at the lower end of the success scale. On the other hand, with the action genre having less movies, but the second highest score, this shows me that each movie had to average at a high score on the success spectrum in order to secure this spot."
  }
]